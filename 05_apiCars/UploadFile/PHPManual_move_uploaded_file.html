<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class=" js flexbox flexboxlegacy datauri" lang="fr"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: move_uploaded_file - Manual </title>

 <link rel="shortcut icon" href="http://php.net/favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="http://php.net/manual/fr/function.move-uploaded-file.php">
 <link rel="shorturl" href="http://php.net/move-uploaded-file">
 <link rel="alternate" href="http://php.net/move-uploaded-file" hreflang="x-default">

 <link rel="contents" href="http://php.net/manual/fr/index.php">
 <link rel="index" href="http://php.net/manual/fr/ref.filesystem.php">
 <link rel="prev" href="http://php.net/manual/fr/function.mkdir.php">
 <link rel="next" href="http://php.net/manual/fr/function.parse-ini-file.php">

 <link rel="alternate" href="http://php.net/manual/en/function.move-uploaded-file.php" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.move-uploaded-file.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.move-uploaded-file.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.move-uploaded-file.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.move-uploaded-file.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/ja/function.move-uploaded-file.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.move-uploaded-file.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.move-uploaded-file.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.move-uploaded-file.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.move-uploaded-file.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="PHPManual_move_uploaded_file_fichiers/cached_002.css" media="screen">
<link rel="stylesheet" type="text/css" href="PHPManual_move_uploaded_file_fichiers/cached_003.css" media="screen">
<link rel="stylesheet" type="text/css" href="PHPManual_move_uploaded_file_fichiers/cached_004.css" media="screen">
<link rel="stylesheet" type="text/css" href="PHPManual_move_uploaded_file_fichiers/cached.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script>
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <!-- base href="http://php.net/manual/fr/function.move-uploaded-file.php" -->

</head>
<body class="docs ">

<nav id="head-nav" class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <a href="http://php.net/" class="brand"><img src="PHPManual_move_uploaded_file_fichiers/php-logo.svg" alt="php" width="48" height="24"></a>
    <div id="mainmenu-toggle-overlay"></div>
    <input type="checkbox" id="mainmenu-toggle">
    <ul class="nav">
      <li class=""><a href="http://php.net/downloads">Downloads</a></li>
      <li class="active"><a href="http://php.net/docs.php">Documentation</a></li>
      <li class=""><a href="http://php.net/get-involved">Get Involved</a></li>
      <li class=""><a href="http://php.net/support">Help</a></li>
    </ul>
    <form class="navbar-search" id="topsearch" action="/search.php">
      <input type="hidden" name="show" value="quickref">
      <span class="twitter-typeahead" style="position: relative; display: inline-block;"><input class="tt-hint search-query" type="text" autocomplete="off" spellcheck="off" disabled="disabled" style="position: absolute; top: 0px; left: 0px; border-color: transparent; box-shadow: none; background: rgb(255, 255, 255) none repeat scroll 0% 0%;"><input type="search" name="pattern" class="search-query tt-query" placeholder="Search" accesskey="s" autocomplete="off" spellcheck="false" style="position: relative; vertical-align: top; background-color: transparent;" dir="auto"><input type="submit" style="visibility: hidden; position: fixed"><span style="position: absolute; left: -9999px; visibility: hidden; white-space: nowrap; font-family: &quot;Fira Sans&quot;, &quot;Source Sans Pro&quot;, Helvetica, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: 0px; text-indent: 0px; text-rendering: optimizelegibility; text-transform: none;"></span><span class="tt-dropdown-menu" style="position: absolute; top: 100%; left: 0px; z-index: 100; display: none;"></span></span>
    </form>
  </div>
  <div id="flash-message"></div>
</nav>
<div class="headsup"><a href="http://php.net/conferences/index.php#id2019-03-12-3">Bulgaria PHP Conference 2019</a></div>
<nav id="trick"><div><dl>
<dt><a href="http://php.net/manual/en/getting-started.php">Getting Started</a></dt>
	<dd><a href="http://php.net/manual/en/introduction.php">Introduction</a></dd>
	<dd><a href="http://php.net/manual/en/tutorial.php">A simple tutorial</a></dd>
<dt><a href="http://php.net/manual/en/langref.php">Language Reference</a></dt>
	<dd><a href="http://php.net/manual/en/language.basic-syntax.php">Basic syntax</a></dd>
	<dd><a href="http://php.net/manual/en/language.types.php">Types</a></dd>
	<dd><a href="http://php.net/manual/en/language.variables.php">Variables</a></dd>
	<dd><a href="http://php.net/manual/en/language.constants.php">Constants</a></dd>
	<dd><a href="http://php.net/manual/en/language.expressions.php">Expressions</a></dd>
	<dd><a href="http://php.net/manual/en/language.operators.php">Operators</a></dd>
	<dd><a href="http://php.net/manual/en/language.control-structures.php">Control Structures</a></dd>
	<dd><a href="http://php.net/manual/en/language.functions.php">Functions</a></dd>
	<dd><a href="http://php.net/manual/en/language.oop5.php">Classes and Objects</a></dd>
	<dd><a href="http://php.net/manual/en/language.namespaces.php">Namespaces</a></dd>
	<dd><a href="http://php.net/manual/en/language.errors.php">Errors</a></dd>
	<dd><a href="http://php.net/manual/en/language.exceptions.php">Exceptions</a></dd>
	<dd><a href="http://php.net/manual/en/language.generators.php">Generators</a></dd>
	<dd><a href="http://php.net/manual/en/language.references.php">References Explained</a></dd>
	<dd><a href="http://php.net/manual/en/reserved.variables.php">Predefined Variables</a></dd>
	<dd><a href="http://php.net/manual/en/reserved.exceptions.php">Predefined Exceptions</a></dd>
	<dd><a href="http://php.net/manual/en/reserved.interfaces.php">Predefined Interfaces and Classes</a></dd>
	<dd><a href="http://php.net/manual/en/context.php">Context options and parameters</a></dd>
	<dd><a href="http://php.net/manual/en/wrappers.php">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="http://php.net/manual/en/security.php">Security</a></dt>
	<dd><a href="http://php.net/manual/en/security.intro.php">Introduction</a></dd>
	<dd><a href="http://php.net/manual/en/security.general.php">General considerations</a></dd>
	<dd><a href="http://php.net/manual/en/security.cgi-bin.php">Installed as CGI binary</a></dd>
	<dd><a href="http://php.net/manual/en/security.apache.php">Installed as an Apache module</a></dd>
	<dd><a href="http://php.net/manual/en/security.sessions.php">Session Security</a></dd>
	<dd><a href="http://php.net/manual/en/security.filesystem.php">Filesystem Security</a></dd>
	<dd><a href="http://php.net/manual/en/security.database.php">Database Security</a></dd>
	<dd><a href="http://php.net/manual/en/security.errors.php">Error Reporting</a></dd>
	<dd><a href="http://php.net/manual/en/security.globals.php">Using Register Globals</a></dd>
	<dd><a href="http://php.net/manual/en/security.variables.php">User Submitted Data</a></dd>
	<dd><a href="http://php.net/manual/en/security.magicquotes.php">Magic Quotes</a></dd>
	<dd><a href="http://php.net/manual/en/security.hiding.php">Hiding PHP</a></dd>
	<dd><a href="http://php.net/manual/en/security.current.php">Keeping Current</a></dd>
<dt><a href="http://php.net/manual/en/features.php">Features</a></dt>
	<dd><a href="http://php.net/manual/en/features.http-auth.php">HTTP authentication with PHP</a></dd>
	<dd><a href="http://php.net/manual/en/features.cookies.php">Cookies</a></dd>
	<dd><a href="http://php.net/manual/en/features.sessions.php">Sessions</a></dd>
	<dd><a href="http://php.net/manual/en/features.xforms.php">Dealing with XForms</a></dd>
	<dd><a href="http://php.net/manual/en/features.file-upload.php">Handling file uploads</a></dd>
	<dd><a href="http://php.net/manual/en/features.remote-files.php">Using remote files</a></dd>
	<dd><a href="http://php.net/manual/en/features.connection-handling.php">Connection handling</a></dd>
	<dd><a href="http://php.net/manual/en/features.persistent-connections.php">Persistent Database Connections</a></dd>
	<dd><a href="http://php.net/manual/en/features.safe-mode.php">Safe Mode</a></dd>
	<dd><a href="http://php.net/manual/en/features.commandline.php">Command line usage</a></dd>
	<dd><a href="http://php.net/manual/en/features.gc.php">Garbage Collection</a></dd>
	<dd><a href="http://php.net/manual/en/features.dtrace.php">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="http://php.net/manual/en/funcref.php">Function Reference</a></dt>
	<dd><a href="http://php.net/manual/en/refs.basic.php.php">Affecting PHP's Behaviour</a></dd>
	<dd><a href="http://php.net/manual/en/refs.utilspec.audio.php">Audio Formats Manipulation</a></dd>
	<dd><a href="http://php.net/manual/en/refs.remote.auth.php">Authentication Services</a></dd>
	<dd><a href="http://php.net/manual/en/refs.utilspec.cmdline.php">Command Line Specific Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.compression.php">Compression and Archive Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.creditcard.php">Credit Card Processing</a></dd>
	<dd><a href="http://php.net/manual/en/refs.crypto.php">Cryptography Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.database.php">Database Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.calendar.php">Date and Time Related Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.fileprocess.file.php">File System Related Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.international.php">Human Language and Character Encoding Support</a></dd>
	<dd><a href="http://php.net/manual/en/refs.utilspec.image.php">Image Processing and Generation</a></dd>
	<dd><a href="http://php.net/manual/en/refs.remote.mail.php">Mail Related Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.math.php">Mathematical Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.utilspec.nontext.php">Non-Text MIME Output</a></dd>
	<dd><a href="http://php.net/manual/en/refs.fileprocess.process.php">Process Control Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.basic.other.php">Other Basic Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.remote.other.php">Other Services</a></dd>
	<dd><a href="http://php.net/manual/en/refs.search.php">Search Engine Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.utilspec.server.php">Server Specific Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.basic.session.php">Session Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.basic.text.php">Text Processing</a></dd>
	<dd><a href="http://php.net/manual/en/refs.basic.vartype.php">Variable and Type Related Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.webservice.php">Web Services</a></dd>
	<dd><a href="http://php.net/manual/en/refs.utilspec.windows.php">Windows Only Extensions</a></dd>
	<dd><a href="http://php.net/manual/en/refs.xml.php">XML Manipulation</a></dd>
	<dd><a href="http://php.net/manual/en/refs.ui.php">GUI Extensions</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="clearfix">
    <div id="breadcrumbs-inner">
          <div class="next">
        <a href="http://php.net/manual/fr/function.parse-ini-file.php">
          parse_ini_file »
        </a>
      </div>
              <div class="prev">
        <a href="http://php.net/manual/fr/function.mkdir.php">
          « mkdir        </a>
      </div>
          <ul>
            <li><a href="http://php.net/manual/fr/index.php">Manuel PHP</a></li>      <li><a href="http://php.net/manual/fr/funcref.php">Référence des fonctions</a></li>      <li><a href="http://php.net/manual/fr/refs.fileprocess.file.php">Extensions relatives aux systèmes de fichiers</a></li>      <li><a href="http://php.net/manual/fr/book.filesystem.php">Système de fichiers</a></li>      <li><a href="http://php.net/manual/fr/ref.filesystem.php">Fonctions sur les systèmes de fichiers</a></li>      </ul>
    </div>
  </div>




<div id="layout" class="clearfix">
  <section id="layout-content">
  <div class="page-tools">
    <div class="change-language">
      <form action="/manual/change.php" method="get" id="changelang" name="changelang">
        <fieldset>
          <label for="changelang-langs">Change language:</label>
          <select onchange="document.changelang.submit()" name="page" id="changelang-langs">
            <option value="en/function.move-uploaded-file.php">English</option>
            <option value="pt_BR/function.move-uploaded-file.php">Brazilian Portuguese</option>
            <option value="zh/function.move-uploaded-file.php">Chinese (Simplified)</option>
            <option value="fr/function.move-uploaded-file.php" selected="selected">French</option>
            <option value="de/function.move-uploaded-file.php">German</option>
            <option value="ja/function.move-uploaded-file.php">Japanese</option>
            <option value="ro/function.move-uploaded-file.php">Romanian</option>
            <option value="ru/function.move-uploaded-file.php">Russian</option>
            <option value="es/function.move-uploaded-file.php">Spanish</option>
            <option value="tr/function.move-uploaded-file.php">Turkish</option>
            <option value="help-translate.php">Other</option>
          </select>
        </fieldset>
      </form>
    </div>
    <div class="edit-bug">
      <a href="https://edit.php.net/?project=PHP&amp;perm=fr/function.move-uploaded-file.php">Edit</a>
      <a href="https://bugs.php.net/report.php?bug_type=Documentation+problem&amp;manpage=function.move-uploaded-file">Report a Bug</a>
    </div>
  </div><div id="function.move-uploaded-file" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">move_uploaded_file</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.3, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">move_uploaded_file</span> — <span class="dc-title">Déplace un fichier téléchargé</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.move-uploaded-file-description">
  <h3 class="title">Description<a class="genanchor" href="#refsect1-function.move-uploaded-file-description"> ¶</a></h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>move_uploaded_file</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$destination</code></span>
   ) : <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   S'assure que le fichier <code class="parameter">filename</code> est un fichier
   téléchargé par HTTP POST. Si le fichier est valide, il est déplacé
   jusqu'à <code class="parameter">destination</code>.
  </p>
  <p class="para">
   Ce type de vérification est spécialement important s'il
   est possible que les fichiers téléchargés
   révèlent leur contenu à l'utilisateur,
   ou même aux utilisateurs du même système.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.move-uploaded-file-parameters">
  <h3 class="title">Liste de paramètres<a class="genanchor" href="#refsect1-function.move-uploaded-file-parameters"> ¶</a></h3>
  <dl>

    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       Le nom du fichier téléchargé.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">destination</code></dt>

     <dd>

      <p class="para">
       La destination du fichier déplacé.
      </p>
     </dd>

    
   </dl>

  
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.move-uploaded-file-returnvalues">
  <h3 class="title">Valeurs de retour<a class="genanchor" href="#refsect1-function.move-uploaded-file-returnvalues"> ¶</a></h3>
  <p class="para">
   Retourne <strong><code>TRUE</code></strong> en cas de succès.
  </p>
  <p class="para">
   Si <code class="parameter">filename</code> n'est pas valide, rien ne se passe,
   et <span class="function"><strong>move_uploaded_file()</strong></span> retournera <strong><code>FALSE</code></strong>.
  </p>
  <p class="para">
   Si <code class="parameter">filename</code> est un fichier téléchargé,
   mais que pour une raison quelconque, il ne peut être déplacé,
   rien ne se passe, et <span class="function"><strong>move_uploaded_file()</strong></span>
   retourne <strong><code>FALSE</code></strong>. De plus, une alerte sera affichée.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.move-uploaded-file-examples">
  <h3 class="title">Exemples<a class="genanchor" href="#refsect1-function.move-uploaded-file-examples"> ¶</a></h3>
  <div class="example" id="example-2940">
    <p><strong>Exemple #1 Téléchargement de plusieurs fichiers</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$uploads_dir&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'/uploads'</span><span style="color: #007700">;<br>foreach&nbsp;(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"pictures"</span><span style="color: #007700">][</span><span style="color: #DD0000">"error"</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">UPLOAD_ERR_OK</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tmp_name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"pictures"</span><span style="color: #007700">][</span><span style="color: #DD0000">"tmp_name"</span><span style="color: #007700">][</span><span style="color: #0000BB">$key</span><span style="color: #007700">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;basename()&nbsp;peut&nbsp;empêcher&nbsp;les&nbsp;attaques&nbsp;de&nbsp;système&nbsp;de&nbsp;fichiers;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;la&nbsp;validation/assainissement&nbsp;supplémentaire&nbsp;du&nbsp;nom&nbsp;de&nbsp;fichier&nbsp;peut&nbsp;être&nbsp;approprié<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"pictures"</span><span style="color: #007700">][</span><span style="color: #DD0000">"name"</span><span style="color: #007700">][</span><span style="color: #0000BB">$key</span><span style="color: #007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">move_uploaded_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$tmp_name</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$uploads_dir</span><span style="color: #DD0000">/</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  
 </div>


 <div class="refsect1 notes" id="refsect1-function.move-uploaded-file-notes">
  <h3 class="title">Notes<a class="genanchor" href="#refsect1-function.move-uploaded-file-notes"> ¶</a></h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    <span class="function"><strong>move_uploaded_file()</strong></span> n'est pas affectée par
    les restrictions liées au <a href="http://php.net/manual/fr/ini.sect.safe-mode.php#ini.safe-mode" class="link">safe mode</a> et à l'<a href="http://php.net/manual/fr/ini.core.php#ini.open-basedir" class="link">open_basedir</a>.
    Cependant, les restrictions sont placées uniquement sur le
    paramètre <code class="parameter">destination</code> qui permet le
    déplacement des fichiers chargés dans lesquels 
    <code class="parameter">filename</code> peut entrer en conflit avec ces
    restrictions. <span class="function"><strong>move_uploaded_file()</strong></span> permet de
    s'assurer de la sécurité de cette opération en autorisant le
    déplacement des seuls fichiers chargés via PHP.
   </p>
  </blockquote>
  <div class="warning"><strong class="warning">Avertissement</strong>
   <p class="para">
    Si le fichier de destination existe déjà, il sera écrasé.
   </p>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.move-uploaded-file-seealso">
  <h3 class="title">Voir aussi<a class="genanchor" href="#refsect1-function.move-uploaded-file-seealso"> ¶</a></h3>
  <ul class="simplelist">
    <li class="member"><span class="function"><a href="http://php.net/manual/fr/function.is-uploaded-file.php" class="function" rel="rdfs-seeAlso">is_uploaded_file()</a> - Indique si le fichier a été téléchargé par HTTP POST</span></li>
    <li class="member"><span class="function"><a href="http://php.net/manual/fr/function.rename.php" class="function" rel="rdfs-seeAlso">rename()</a> - Renomme un fichier ou un dossier</span></li>
    <li class="member">Voir la section sur <a href="http://php.net/manual/fr/features.file-upload.php" class="link">les
      téléchargements de fichiers</a> pour un exemple d'utilisation</li>
   </ul>
  
 </div>

</div>
<section id="usernotes">
 <div class="head">
  <span class="action"><a href="http://php.net/manual/add-note.php?sect=function.move-uploaded-file&amp;redirect=http://php.net/manual/fr/function.move-uploaded-file.php"><img src="PHPManual_move_uploaded_file_fichiers/notes-add2x.png" alt="add a note" width="12" height="12"> <small>add a note</small></a></span>
  <h3 class="title">User Contributed Notes <span class="count">54 notes</span></h3>
 </div><div id="allnotes">
  <div class="note" id="111412">  <div class="votes">
    <div id="Vu111412">
    <a href="http://php.net/manual/vote-note.php?id=111412&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd111412">
    <a href="http://php.net/manual/vote-note.php?id=111412&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V111412" title="66% like this...">
    140
    </div>
  </div>
  <a href="#111412" class="name">
  <strong class="user"><em>Yousef Ismaeil Cliprz</em></strong></a><a class="genanchor" href="#111412"> ¶</a><div class="date" title="2013-02-17 10:59"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom111412" style="opacity: 1;">
<div class="phpcode"><code><span class="html">
Security tips you must know before use this function :<br><br>First : make sure that the file is not empty.<br><br>Second : make sure the file name in English characters, numbers and (_-.) symbols, For more protection.<br><br>You can use below function as in example<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * Check $_FILES[][name]<br> *<br> * @param (string) $filename - Uploaded file name.<br> * @author Yousef Ismaeil Cliprz<br> */<br></span><span class="keyword">function </span><span class="default">check_file_uploaded_name </span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; (bool) ((</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"`^[-0-9A-Z_\.]+$`i"</span><span class="keyword">,</span><span class="default">$filename</span><span class="keyword">)) ? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">);<br>}<br><br></span><span class="default">?&gt;<br></span><br>Third : make sure that the file name not bigger than 250 characters.<br><br>as in example :<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * Check $_FILES[][name] length.<br> *<br> * @param (string) $filename - Uploaded file name.<br> * @author Yousef Ismaeil Cliprz.<br> */<br></span><span class="keyword">function </span><span class="default">check_file_uploaded_length </span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; return (bool) ((</span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">,</span><span class="string">"UTF-8"</span><span class="keyword">) &gt; </span><span class="default">225</span><span class="keyword">) ? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">);<br>}<br><br></span><span class="default">?&gt;<br></span><br>Fourth: Check File extensions and Mime Types that you want to allow in your project. You can use : pathinfo() <a href="http://php.net/pathinfo" rel="nofollow" target="_blank">http://php.net/pathinfo</a><br><br>or you can use regular expression for check File extensions as in example<br><br>#^(gif|jpg|jpeg|jpe|png)$#i<br><br>or use in_array checking as<br><br><span class="default">&lt;?php<br><br>$ext_type </span><span class="keyword">= array(</span><span class="string">'gif'</span><span class="keyword">,</span><span class="string">'jpg'</span><span class="keyword">,</span><span class="string">'jpe'</span><span class="keyword">,</span><span class="string">'jpeg'</span><span class="keyword">,</span><span class="string">'png'</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>You have multi choices to checking extensions and Mime types.<br><br>Fifth: Check file size and make sure the limit of php.ini to upload files is what you want, You can start from <a href="http://www.php.net/manual/en/ini.core.php#ini.file-uploads" rel="nofollow" target="_blank">http://www.php.net/manual/en/ini.core.php#ini.file-uploads</a><br><br>And last but not least : Check the file content if have a bad codes or something like this function <a href="http://php.net/manual/en/function.file-get-contents.php." rel="nofollow" target="_blank">http://php.net/manual/en/function.file-get-contents.php.</a><br><br>You can use .htaccess to stop working some scripts as in example php file in your upload path.<br><br>use :<br><br>AddHandler cgi-script .php .pl .jsp .asp .sh .cgi<br>Options -ExecCGI&nbsp; <br><br>Do not forget this steps for your project protection.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105026">  <div class="votes">
    <div id="Vu105026">
    <a href="http://php.net/manual/vote-note.php?id=105026&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd105026">
    <a href="http://php.net/manual/vote-note.php?id=105026&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V105026" title="67% like this...">
    60
    </div>
  </div>
  <a href="#105026" class="name">
  <strong class="user"><em>matthias dot dailey at gmail dot com</em></strong></a><a class="genanchor" href="#105026"> ¶</a><div class="date" title="2011-07-22 01:26"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom105026">
<div class="phpcode"><code><span class="html">
The destination directory must exist; move_uploaded_file() will not automatically create it for you.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86332">  <div class="votes">
    <div id="Vu86332">
    <a href="http://php.net/manual/vote-note.php?id=86332&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd86332">
    <a href="http://php.net/manual/vote-note.php?id=86332&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V86332" title="55% like this...">
    14
    </div>
  </div>
  <a href="#86332" class="name">
  <strong class="user"><em>Dan Delaney</em></strong></a><a class="genanchor" href="#86332"> ¶</a><div class="date" title="2008-10-13 01:41"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom86332">
<div class="phpcode"><code><span class="html">
For those using PHP on Windows and IIS, you SHOULD set the 
"upload_tmp_dir" value in php.ini to some directory around where your 
websites directory is, create that directory, and then set the same 
permissions on it that you have set for your websites directory. 
Otherwise, when you upload a file and it goes into C:\WINDOWS\Temp, then
 you move it to your website directory, its permissions will NOT be set 
correctly. This will cause you problems if you then want to manipulate 
that file with something like ImageMagick's convert utility.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="122834">  <div class="votes">
    <div id="Vu122834">
    <a href="http://php.net/manual/vote-note.php?id=122834&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122834">
    <a href="http://php.net/manual/vote-note.php?id=122834&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122834" title="56% like this...">
    3
    </div>
  </div>
  <a href="#122834" class="name">
  <strong class="user"><em>ccbsschucko at gmail dot com</em></strong></a><a class="genanchor" href="#122834"> ¶</a><div class="date" title="2018-06-15 12:44"><strong>8 months ago</strong></div>
  <div class="text" id="Hcom122834">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php <br>&nbsp; &nbsp; </span><span class="keyword">class </span><span class="default">UploadTool </span><span class="keyword">{<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp; &nbsp; &nbsp; * @var arr =&gt; $upload_info = infos sobre os arquivos enviados<br>&nbsp; &nbsp; &nbsp; &nbsp; */<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">private </span><span class="default">$upload_info </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp; &nbsp; &nbsp; * @param str =&gt; $input_name = nome do input<br>&nbsp; &nbsp; &nbsp; &nbsp; * @param str =&gt; $folder_to_move = nome da pasta em que o arquivo será salvo<br>&nbsp; &nbsp; &nbsp; &nbsp; * @param arr =&gt; $mime_allowed = mime types permitidos no processo de upload<br>&nbsp; &nbsp; &nbsp; &nbsp; * @param bol =&gt; $return_json = se true retorna um objeto json<br>&nbsp; &nbsp; &nbsp; &nbsp; */<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">manage_single_file</span><span class="keyword">(</span><span class="default">string $input_name</span><span class="keyword">, </span><span class="default">string $folder_to_move</span><span class="keyword">, array </span><span class="default">$mime_allowed </span><span class="keyword">= [], </span><span class="default">bool $return_json </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$resultado </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$count_mime_allowed </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$mime_allowed</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">])){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_name_file </span><span class="keyword">= </span><span class="default">bin2hex</span><span class="keyword">(</span><span class="default">random_bytes</span><span class="keyword">(</span><span class="default">64</span><span class="keyword">)).</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">pathinfo</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">], </span><span class="default">PATHINFO_EXTENSION</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">upload_info </span><span class="keyword">= array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="default">$new_name_file</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'size' </span><span class="keyword">=&gt; </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'size'</span><span class="keyword">],<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'mime' </span><span class="keyword">=&gt; </span><span class="default">finfo_file</span><span class="keyword">(</span><span class="default">finfo_open</span><span class="keyword">(</span><span class="default">FILEINFO_MIME_TYPE</span><span class="keyword">), </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">]),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'extension' </span><span class="keyword">=&gt; </span><span class="default">pathinfo</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">], </span><span class="default">PATHINFO_EXTENSION</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'check_mime' </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'folder_to_move' </span><span class="keyword">=&gt; </span><span class="default">$folder_to_move</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'error_code' </span><span class="keyword">=&gt; </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'error'</span><span class="keyword">],<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$count_mime_allowed </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; !</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">upload_info</span><span class="keyword">[</span><span class="string">'mime'</span><span class="keyword">], </span><span class="default">$mime_allowed</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">)){</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">upload_info</span><span class="keyword">[</span><span class="string">'check_mime'</span><span class="keyword">] = </span><span class="default">false</span><span class="keyword">;}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">upload_info</span><span class="keyword">[</span><span class="string">'error_code'</span><span class="keyword">] === </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">upload_info</span><span class="keyword">[</span><span class="string">'check_mime'</span><span class="keyword">] === </span><span class="default">true</span><span class="keyword">){</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">], </span><span class="default">$folder_to_move</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">upload_info</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]);}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$resultado</span><span class="keyword">[</span><span class="string">'upload_info'</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">upload_info</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$return_json</span><span class="keyword">){echo </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$resultado</span><span class="keyword">);}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$return_json</span><span class="keyword">){return </span><span class="default">$resultado</span><span class="keyword">;}<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp; &nbsp; &nbsp; * @param str =&gt; $input_name = nome do input<br>&nbsp; &nbsp; &nbsp; &nbsp; * @param str =&gt; $folder_to_move = nome da pasta em que o arquivo será salvo<br>&nbsp; &nbsp; &nbsp; &nbsp; * @param arr =&gt; $mime_allowed = mime types permitidos no processo de upload<br>&nbsp; &nbsp; &nbsp; &nbsp; * @param bol =&gt; $return_json = se true retorna um objeto json<br>&nbsp; &nbsp; &nbsp; &nbsp; */<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">manage_multiple_file</span><span class="keyword">(</span><span class="default">string $input_name</span><span class="keyword">, </span><span class="default">string $folder_to_move</span><span class="keyword">, array </span><span class="default">$mime_allowed </span><span class="keyword">= [], </span><span class="default">bool $return_json </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$resultado </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$count_mime_allowed </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$mime_allowed</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$qtd_arquivos_enviados </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$qtd_arquivos_enviados</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">])){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_name_file </span><span class="keyword">= </span><span class="default">bin2hex</span><span class="keyword">(</span><span class="default">random_bytes</span><span class="keyword">(</span><span class="default">64</span><span class="keyword">)).</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">pathinfo</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">], </span><span class="default">PATHINFO_EXTENSION</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">upload_info</span><span class="keyword">[] = array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="default">$new_name_file</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'size' </span><span class="keyword">=&gt; </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'size'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">],<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'mime' </span><span class="keyword">=&gt; </span><span class="default">finfo_file</span><span class="keyword">(</span><span class="default">finfo_open</span><span class="keyword">(</span><span class="default">FILEINFO_MIME_TYPE</span><span class="keyword">), </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'extension' </span><span class="keyword">=&gt; </span><span class="default">pathinfo</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">], </span><span class="default">PATHINFO_EXTENSION</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'check_mime' </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'folder_to_move' </span><span class="keyword">=&gt; </span><span class="default">$folder_to_move</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'error_code' </span><span class="keyword">=&gt; </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'error'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">],<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$count_mime_allowed </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; !</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">upload_info</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'mime'</span><span class="keyword">], </span><span class="default">$mime_allowed</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">)){</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">upload_info</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'check_mime'</span><span class="keyword">] = </span><span class="default">false</span><span class="keyword">;}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">upload_info</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'error_code'</span><span class="keyword">] === </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">upload_info</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'check_mime'</span><span class="keyword">] === </span><span class="default">true</span><span class="keyword">){</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="default">$input_name</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$folder_to_move</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">upload_info</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]);}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$resultado</span><span class="keyword">[</span><span class="string">'upload_info'</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">upload_info</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$return_json</span><span class="keyword">){echo </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$resultado</span><span class="keyword">);}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$return_json</span><span class="keyword">){return </span><span class="default">$resultado</span><span class="keyword">;}<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if(</span><span class="default">$_FILES</span><span class="keyword">){(new </span><span class="default">UploadTool</span><span class="keyword">)-&gt;</span><span class="default">manage_multiple_file</span><span class="keyword">(</span><span class="string">'input_arquivos'</span><span class="keyword">, </span><span class="default">__DIR__</span><span class="keyword">.</span><span class="string">'/pasta/'</span><span class="keyword">);}<br></span><span class="default">?&gt;<br></span>&lt;form method="POST" action="<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">] </span><span class="default">?&gt;</span>" enctype="multipart/form-data"&gt;<br>&nbsp; &nbsp; &lt;input type="file" name="input_arquivos[]" multiple="true"&gt;<br>&nbsp; &nbsp; &lt;button type="submit"&gt;enviar&lt;/button&gt;<br>&lt;/form&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76452">  <div class="votes">
    <div id="Vu76452">
    <a href="http://php.net/manual/vote-note.php?id=76452&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd76452">
    <a href="http://php.net/manual/vote-note.php?id=76452&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V76452" title="54% like this...">
    6
    </div>
  </div>
  <a href="#76452" class="name">
  <strong class="user"><em>nlgordon at iastate dot edu</em></strong></a><a class="genanchor" href="#76452"> ¶</a><div class="date" title="2007-07-16 11:29"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom76452">
<div class="phpcode"><code><span class="html">
Just a helpful comment.&nbsp; If you have open_basedir set then you must
 set upload_tmp_dir to somewhere within the open_basedir.&nbsp; 
Otherwise the file upload will be denied.&nbsp; move_uploaded_file might
 be open_basedir aware, but the rest of the upload process isn't.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103791">  <div class="votes">
    <div id="Vu103791">
    <a href="http://php.net/manual/vote-note.php?id=103791&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd103791">
    <a href="http://php.net/manual/vote-note.php?id=103791&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V103791" title="52% like this...">
    1
    </div>
  </div>
  <a href="#103791" class="name">
  <strong class="user"><em>labsy at seznam dot org</em></strong></a><a class="genanchor" href="#103791"> ¶</a><div class="date" title="2011-05-03 04:07"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom103791">
<div class="phpcode"><code><span class="html">
A note for PHP on Windows IIS platform:<br>PHP does obviously not like 
directory traversing among partitions, so if you set upload_tmp_dir to 
be on different partition as php-cgi.exe or php.exe is, upload_tmp_dir 
will NOT be accessible for file uploads! You will get ERROR 6 on any 
attempt to upload file, and file size will be 0.<br>Resolution is to have upload_tmp_dir set to a path under PHP install folder.<br>...and
 make sure this folder (and also session_save_path folder) has at least 
read/write permissions granted to AppPool owner (usually NETWORK 
SERVICE) and IIS web user (by default IUSR_).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="64418">  <div class="votes">
    <div id="Vu64418">
    <a href="http://php.net/manual/vote-note.php?id=64418&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd64418">
    <a href="http://php.net/manual/vote-note.php?id=64418&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V64418" title="50% like this...">
    0
    </div>
  </div>
  <a href="#64418" class="name">
  <strong class="user"><em>Zarel</em></strong></a><a class="genanchor" href="#64418"> ¶</a><div class="date" title="2006-04-13 06:12"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom64418">
<div class="phpcode"><code><span class="html">
nouncad at mayetlite dot com posted a function that uploaded a file, and
 would rename it if it already existed, to filename[n].ext<br><br>It 
only worked for files with extensions exactly three letters long, so I 
fixed that (and made a few other improvements while I was at it).<br><br><span class="default">&lt;?php<br></span><span class="comment">// Usage: uploadfile($_FILE['file']['name'],'temp/',$_FILE['file']['tmp_name'])<br></span><span class="keyword">function </span><span class="default">uploadfile</span><span class="keyword">(</span><span class="default">$origin</span><span class="keyword">, </span><span class="default">$dest</span><span class="keyword">, </span><span class="default">$tmp_name</span><span class="keyword">)<br>{<br>&nbsp; </span><span class="default">$origin </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$origin</span><span class="keyword">));<br>&nbsp; </span><span class="default">$fulldest </span><span class="keyword">= </span><span class="default">$dest</span><span class="keyword">.</span><span class="default">$origin</span><span class="keyword">;<br>&nbsp; </span><span class="default">$filename </span><span class="keyword">= </span><span class="default">$origin</span><span class="keyword">;<br>&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$fulldest</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; {<br>&nbsp; &nbsp; </span><span class="default">$fileext </span><span class="keyword">= (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$origin</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">)===</span><span class="default">false</span><span class="keyword">?</span><span class="string">''</span><span class="keyword">:</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">substr</span><span class="keyword">(</span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$origin</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">));<br>&nbsp; &nbsp; </span><span class="default">$filename </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$origin</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$origin</span><span class="keyword">)-</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$fileext</span><span class="keyword">)).</span><span class="string">'['</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">.</span><span class="string">']'</span><span class="keyword">.</span><span class="default">$fileext</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$fulldest </span><span class="keyword">= </span><span class="default">$dest</span><span class="keyword">.</span><span class="default">$newfilename</span><span class="keyword">;<br>&nbsp; }<br>&nbsp; <br>&nbsp; if (</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$tmp_name</span><span class="keyword">, </span><span class="default">$fulldest</span><span class="keyword">))<br>&nbsp; &nbsp; return </span><span class="default">$filename</span><span class="keyword">;<br>&nbsp; return </span><span class="default">false</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60521">  <div class="votes">
    <div id="Vu60521">
    <a href="http://php.net/manual/vote-note.php?id=60521&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd60521">
    <a href="http://php.net/manual/vote-note.php?id=60521&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V60521" title="47% like this...">
    -1
    </div>
  </div>
  <a href="#60521" class="name">
  <strong class="user"><em>mancow at macfilez dot net</em></strong></a><a class="genanchor" href="#60521"> ¶</a><div class="date" title="2006-01-09 09:31"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom60521" style="opacity: 0.75;">
<div class="phpcode"><code><span class="html">
To nouncad at mayetlite dot com,<br><br>That function will work fine for
 files with a 3-character file extension.&nbsp; However, it is worth 
noting that there are valid, registered file extensions that are longer 
than 3 characters.&nbsp; For example, a JPEG file can be denoted by 
*.jpg (and others), but it can also have *.jpeg as a valid 
extension.&nbsp; Check out <a href="http://www.filext.com/" rel="nofollow" target="_blank">http://www.filext.com/</a> for a good reference of file extensions.<br><br>The
 best bet to me would be parsing the uploaded file's name 
($_FILES['uploadedfile']['name']) based on the presence of dots.&nbsp; 
Another wrench in the gears:&nbsp; a file can have dots in the 
filename.&nbsp; That's easy enough to handle -- just explode() the file 
name and hope that the last element in the array it gives you is the 
file extension (you can always validate it if you're so inclined).&nbsp;
 Then just piece it together in a string accordingly by stepping through
 the array (don't forget to add those dots back to where they were!), 
appending a guaranteed unique string of characters (or enumerate it like
 you were doing, keeping track via a loop), and finally tacking on the 
file extension.<br><br>You may have other mechanisms for verifying a 
file's extension, such as a preg_match on the whole name, using 
something like "/\\.(gif|jpg|jpeg|png|bmp)$/i" (more can, of course, be 
added if you so desire) for the most common types of images found on the
 web.<br><br>For blindly guaranteeing an uploaded file will be uniquely named, this seems like a fantastic way to go.&nbsp; Enjoy!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69555">  <div class="votes">
    <div id="Vu69555">
    <a href="http://php.net/manual/vote-note.php?id=69555&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd69555">
    <a href="http://php.net/manual/vote-note.php?id=69555&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V69555" title="45% like this...">
    -3
    </div>
  </div>
  <a href="#69555" class="name">
  <strong class="user"><em>shacker at birdhouse dot org</em></strong></a><a class="genanchor" href="#69555"> ¶</a><div class="date" title="2006-09-10 12:28"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom69555" style="opacity: 0.55;">
<div class="phpcode"><code><span class="html">
If you're dealing with files uploaded through some external FTP source 
and need to move them to a final destination, searching php.net for "mv"
 or "move" won't get you what you want. You want the rename() function. <br><br><a href="http://www.php.net/manual/en/function.rename.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/function.rename.php</a><br><br>(move_uploaded_file() won't work, since the POST vars won't be present.)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="57959">  <div class="votes">
    <div id="Vu57959">
    <a href="http://php.net/manual/vote-note.php?id=57959&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd57959">
    <a href="http://php.net/manual/vote-note.php?id=57959&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V57959" title="45% like this...">
    -4
    </div>
  </div>
  <a href="#57959" class="name">
  <strong class="user"><em>jest3r at mtonic dot net</em></strong></a><a class="genanchor" href="#57959"> ¶</a><div class="date" title="2005-10-19 09:10"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom57959" style="opacity: 0.45;">
<div class="phpcode"><code><span class="html">
It seems that move_uploaded_file use the GROUP permissions of the parent
 directory of the tmp file location, whereas a simple "copy" uses the 
group of the apache process. This could create a security nighmare if 
your tmp file location is owned by root:wheel</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82065">  <div class="votes">
    <div id="Vu82065">
    <a href="http://php.net/manual/vote-note.php?id=82065&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd82065">
    <a href="http://php.net/manual/vote-note.php?id=82065&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V82065" title="44% like this...">
    -4
    </div>
  </div>
  <a href="#82065" class="name">
  <strong class="user"><em>jphansen at uga dot edu</em></strong></a><a class="genanchor" href="#82065"> ¶</a><div class="date" title="2008-03-26 07:41"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom82065" style="opacity: 0.45;">
<div class="phpcode"><code><span class="html">
I was getting error code 1 (<a href="http://www.php.net/manual/en/features.file-upload.errors.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/features.file-upload.errors.php</a>), indicating that the file exceeded upload_max_filesize. To fix this, run <span class="default">&lt;?php ini_set</span><span class="keyword">(</span><span class="string">"upload_max_filesize"</span><span class="keyword">, </span><span class="string">"100M"</span><span class="keyword">); </span><span class="default">?&gt;</span> (then restart apache) changing the second argument to your limit.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69096">  <div class="votes">
    <div id="Vu69096">
    <a href="http://php.net/manual/vote-note.php?id=69096&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd69096">
    <a href="http://php.net/manual/vote-note.php?id=69096&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V69096" title="45% like this...">
    -5
    </div>
  </div>
  <a href="#69096" class="name">
  <strong class="user"><em>Rob Szarka</em></strong></a><a class="genanchor" href="#69096"> ¶</a><div class="date" title="2006-08-22 06:18"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom69096" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
Apparently the warning above might better be written "If the destination
 file already exists, it will be overwritten ... regardless of the 
destination file's permissions."<br><br>In other words, 
move_uploaded_file() executes as if it's root, not the user under which 
the web server is operating or the owner of the script that's executing.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96216">  <div class="votes">
    <div id="Vu96216">
    <a href="http://php.net/manual/vote-note.php?id=96216&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd96216">
    <a href="http://php.net/manual/vote-note.php?id=96216&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V96216" title="45% like this...">
    -9
    </div>
  </div>
  <a href="#96216" class="name">
  <strong class="user"><em>brentwientjes at NOSPAM dot comcast dot net</em></strong></a><a class="genanchor" href="#96216"> ¶</a><div class="date" title="2010-02-15 11:34"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom96216" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
I have for a couple of years been stymed to understand how to 
effectively load images (of more than 2MB) and then create 
thumbnails.&nbsp; My note below on general file uploading was an early 
hint of some of the system default limitations and I have recently 
discovered the final limit&nbsp; I offer this as an example of the 
various missing pieces of information to successfully load images of 
more than 2MB and then create thumbnails.&nbsp; This particular example 
assumes a picture of a user is being uploaded and because of browser 
caching needs a unique number at the end to make the browser load a new 
picture for review at the time of upload.&nbsp; The overall calling 
program I am using is a Flex based application which calls this php file
 to upload user thumbnails.<br><br>The secret sauce is:<br><br>1.&nbsp; adjust server memory size, file upload size, and post size<br>2.&nbsp; convert image to standard formate (in this case jpg) and scale<br><br>The
 server may be adjusted with the .htaccess file or inline code.&nbsp; 
This example has an .htaccess file with file upload size and post size 
and then inline code for dynamic system memory.<br><br>htaccess file:<br>php_value post_max_size 16M<br>php_value upload_max_filesize 6M<br><br><span class="default">&lt;?php <br></span><span class="comment">//&nbsp; $img_base = base directory structure for thumbnail images<br>//&nbsp; $w_dst = maximum width of thumbnail<br>//&nbsp; $h_dst = maximum height of thumbnail<br>//&nbsp; $n_img = new thumbnail name<br>//&nbsp; $o_img = old thumbnail name<br></span><span class="keyword">function </span><span class="default">convertPic</span><span class="keyword">(</span><span class="default">$img_base</span><span class="keyword">, </span><span class="default">$w_dst</span><span class="keyword">, </span><span class="default">$h_dst</span><span class="keyword">, </span><span class="default">$n_img</span><span class="keyword">, </span><span class="default">$o_img</span><span class="keyword">)<br>&nbsp; {</span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'memory_limit'</span><span class="keyword">, </span><span class="string">'100M'</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">//&nbsp; handle large images<br>&nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$img_base</span><span class="keyword">.</span><span class="default">$n_img</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//&nbsp; remove old images if present<br>&nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$img_base</span><span class="keyword">.</span><span class="default">$o_img</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">$new_img </span><span class="keyword">= </span><span class="default">$img_base</span><span class="keyword">.</span><span class="default">$n_img</span><span class="keyword">;<br>&nbsp; &nbsp;&nbsp; <br>&nbsp;&nbsp; </span><span class="default">$file_src </span><span class="keyword">= </span><span class="default">$img_base</span><span class="keyword">.</span><span class="string">"img.jpg"</span><span class="keyword">;&nbsp; </span><span class="comment">//&nbsp; temporary safe image storage<br>&nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$file_src</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'Filedata'</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">], </span><span class="default">$file_src</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp;&nbsp; list(</span><span class="default">$w_src</span><span class="keyword">, </span><span class="default">$h_src</span><span class="keyword">, </span><span class="default">$type</span><span class="keyword">) = </span><span class="default">getimagesize</span><span class="keyword">(</span><span class="default">$file_src</span><span class="keyword">);&nbsp; &nbsp;&nbsp; </span><span class="comment">// create new dimensions, keeping aspect ratio<br>&nbsp;&nbsp; </span><span class="default">$ratio </span><span class="keyword">= </span><span class="default">$w_src</span><span class="keyword">/</span><span class="default">$h_src</span><span class="keyword">;<br>&nbsp;&nbsp; if (</span><span class="default">$w_dst</span><span class="keyword">/</span><span class="default">$h_dst </span><span class="keyword">&gt; </span><span class="default">$ratio</span><span class="keyword">) {</span><span class="default">$w_dst </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$h_dst</span><span class="keyword">*</span><span class="default">$ratio</span><span class="keyword">);} else {</span><span class="default">$h_dst </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$w_dst</span><span class="keyword">/</span><span class="default">$ratio</span><span class="keyword">);}<br><br>&nbsp;&nbsp; switch (</span><span class="default">$type</span><span class="keyword">)<br>&nbsp; &nbsp;&nbsp; {case </span><span class="default">1</span><span class="keyword">:&nbsp;&nbsp; </span><span class="comment">//&nbsp;&nbsp; gif -&gt; jpg<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$img_src </span><span class="keyword">= </span><span class="default">imagecreatefromgif</span><span class="keyword">(</span><span class="default">$file_src</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; case </span><span class="default">2</span><span class="keyword">:&nbsp;&nbsp; </span><span class="comment">//&nbsp;&nbsp; jpeg -&gt; jpg<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$img_src </span><span class="keyword">= </span><span class="default">imagecreatefromjpeg</span><span class="keyword">(</span><span class="default">$file_src</span><span class="keyword">); <br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; case </span><span class="default">3</span><span class="keyword">:&nbsp; </span><span class="comment">//&nbsp;&nbsp; png -&gt; jpg<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$img_src </span><span class="keyword">= </span><span class="default">imagecreatefrompng</span><span class="keyword">(</span><span class="default">$file_src</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp;&nbsp; }<br>&nbsp;&nbsp; </span><span class="default">$img_dst </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">$w_dst</span><span class="keyword">, </span><span class="default">$h_dst</span><span class="keyword">);&nbsp; </span><span class="comment">//&nbsp; resample<br>&nbsp;&nbsp; <br>&nbsp;&nbsp; </span><span class="default">imagecopyresampled</span><span class="keyword">(</span><span class="default">$img_dst</span><span class="keyword">, </span><span class="default">$img_src</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$w_dst</span><span class="keyword">, </span><span class="default">$h_dst</span><span class="keyword">, </span><span class="default">$w_src</span><span class="keyword">, </span><span class="default">$h_src</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">imagejpeg</span><span class="keyword">(</span><span class="default">$img_dst</span><span class="keyword">, </span><span class="default">$new_img</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//&nbsp; save new image<br><br>&nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$file_src</span><span class="keyword">);&nbsp; </span><span class="comment">//&nbsp; clean up image storage<br>&nbsp;&nbsp; </span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$img_src</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp;&nbsp; </span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$img_dst</span><span class="keyword">);<br>&nbsp; }<br><br></span><span class="default">$p_id </span><span class="keyword">= (Integer) </span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">uid</span><span class="keyword">];<br></span><span class="default">$ver </span><span class="keyword">= (Integer) </span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">ver</span><span class="keyword">];<br></span><span class="default">$delver </span><span class="keyword">= (Integer) </span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">delver</span><span class="keyword">];<br></span><span class="default">convertPic</span><span class="keyword">(</span><span class="string">"your/file/structure/"</span><span class="keyword">, </span><span class="default">150</span><span class="keyword">, </span><span class="default">150</span><span class="keyword">, </span><span class="string">"u"</span><span class="keyword">.</span><span class="default">$p_id</span><span class="keyword">.</span><span class="string">"v"</span><span class="keyword">.</span><span class="default">$ver</span><span class="keyword">.</span><span class="string">".jpg"</span><span class="keyword">, </span><span class="string">"u"</span><span class="keyword">.</span><span class="default">$p_id</span><span class="keyword">.</span><span class="string">"v"</span><span class="keyword">.</span><span class="default">$delver</span><span class="keyword">.</span><span class="string">".jpg"</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75654">  <div class="votes">
    <div id="Vu75654">
    <a href="http://php.net/manual/vote-note.php?id=75654&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd75654">
    <a href="http://php.net/manual/vote-note.php?id=75654&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V75654" title="45% like this...">
    -6
    </div>
  </div>
  <a href="#75654" class="name">
  <strong class="user"><em>bogusred</em></strong></a><a class="genanchor" href="#75654"> ¶</a><div class="date" title="2007-06-10 01:58"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom75654" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
If you have a directory in a *nix environment where you store all of 
your file uploads and your php script only seems to work when 
permissions for that directory are set to 777, here's how to fix it so 
that you can have the security benefits of 755 while still allowing your
 php scripts to work, including the move_uploaded_file().<br><br>through shell access, navigate to the directory that contains your uploads folder and run the following 2 commands:<br>chown -R nobody uploaddir<br>chmod -R 755 uploaddir<br><br>Replace
 'uploaddir' with the name of your uploads directory. The first command 
changes the owner of the directory and files to 'nobody' which is what 
php operates under. The second changes the folder and files to only 
allow user access to writing. This is much more secure.<br><br>Hopefully this will help someone out there who had the same problem as me.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74602">  <div class="votes">
    <div id="Vu74602">
    <a href="http://php.net/manual/vote-note.php?id=74602&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd74602">
    <a href="http://php.net/manual/vote-note.php?id=74602&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V74602" title="44% like this...">
    -3
    </div>
  </div>
  <a href="#74602" class="name">
  <strong class="user"><em>booc0mtaco at gmail dot com</em></strong></a><a class="genanchor" href="#74602"> ¶</a><div class="date" title="2007-04-19 08:45"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom74602" style="opacity: 0.55;">
<div class="phpcode"><code><span class="html">
Also, make sure that the setting for the post_max_size allows for a proper file size range.<br><br>post_max_size = 128M ; Expands the size of POST data for file uploads</span>
</code></div>
  </div>
 </div>
  <div class="note" id="58541">  <div class="votes">
    <div id="Vu58541">
    <a href="http://php.net/manual/vote-note.php?id=58541&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd58541">
    <a href="http://php.net/manual/vote-note.php?id=58541&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V58541" title="44% like this...">
    -3
    </div>
  </div>
  <a href="#58541" class="name">
  <strong class="user"><em>ineedmynetwork.com</em></strong></a><a class="genanchor" href="#58541"> ¶</a><div class="date" title="2005-11-07 01:27"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom58541" style="opacity: 0.55;">
<div class="phpcode"><code><span class="html">
Microsoft returns image/pjpeg not image/jpg when using $_FILES['imageName']['type'];</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108133">  <div class="votes">
    <div id="Vu108133">
    <a href="http://php.net/manual/vote-note.php?id=108133&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd108133">
    <a href="http://php.net/manual/vote-note.php?id=108133&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V108133" title="43% like this...">
    -8
    </div>
  </div>
  <a href="#108133" class="name">
  <strong class="user"><em>marcelwoo</em></strong></a><a class="genanchor" href="#108133"> ¶</a><div class="date" title="2012-03-31 04:41"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom108133" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
One more thing I want to mention about the post_max_size setting in php.ini that nobody else has mentioned.<br>If
 you try to upload a file larger than the post_max_size value (or multi 
files), the page will only refresh itself and no errors are thrown. It 
took me a while to figure the reason out.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="56533">  <div class="votes">
    <div id="Vu56533">
    <a href="http://php.net/manual/vote-note.php?id=56533&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd56533">
    <a href="http://php.net/manual/vote-note.php?id=56533&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V56533" title="44% like this...">
    -5
    </div>
  </div>
  <a href="#56533" class="name">
  <strong class="user"><em>mikelone</em></strong></a><a class="genanchor" href="#56533"> ¶</a><div class="date" title="2005-09-06 08:46"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom56533" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
If the user try to upload a too bigger file then the upload procedure will fail even if u have established an error message.<br>How to avoid this problem? there's my solution:<br><br>(max_file_size = 2,50 MB)<br><br>$fsize = $_FILES["userfile"]["size"];<br><br>if($fsize == 0 || $fsize &gt; 2621000) exit("keep the filesize under 2,50MB!!");<br><br>When the size is bigger than the MAX_FILE_SIZE field, the value of $fsize is equal to 0 (zero) ......</span>
</code></div>
  </div>
 </div>
  <div class="note" id="72861">  <div class="votes">
    <div id="Vu72861">
    <a href="http://php.net/manual/vote-note.php?id=72861&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd72861">
    <a href="http://php.net/manual/vote-note.php?id=72861&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V72861" title="42% like this...">
    -3
    </div>
  </div>
  <a href="#72861" class="name"><strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="#72861"> ¶</a><div class="date" title="2007-02-03 07:32"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom72861" style="opacity: 0.55;">
<div class="phpcode"><code><span class="html">
If you find that large files do not upload in PHP even though you've 
changed the max_upload_size , this is because you need to change the max
 memory size varible too. The entire file is loaded into memory before 
it is saved to disk.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94126">  <div class="votes">
    <div id="Vu94126">
    <a href="http://php.net/manual/vote-note.php?id=94126&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd94126">
    <a href="http://php.net/manual/vote-note.php?id=94126&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V94126" title="41% like this...">
    -4
    </div>
  </div>
  <a href="#94126" class="name">
  <strong class="user"><em>brentwientjes at NOSPAM dot comast dot net</em></strong></a><a class="genanchor" href="#94126"> ¶</a><div class="date" title="2009-10-18 12:21"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom94126" style="opacity: 0.45;">
<div class="phpcode"><code><span class="html">
I have looked at a lot of the file upload code listed below and other 
php documentation and have developed hopefully a robust single file 
upload routine.&nbsp; I will later update with a multi file 
upload.&nbsp; I have modestly tested the code.
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">//&nbsp; 5MB maximum file size
<br></span><span class="default">$MAXIMUM_FILESIZE </span><span class="keyword">= </span><span class="default">5 </span><span class="keyword">* </span><span class="default">1024 </span><span class="keyword">* </span><span class="default">1024</span><span class="keyword">;
<br></span><span class="comment">//&nbsp; Valid file extensions (images, word, excel, powerpoint)
<br></span><span class="default">$rEFileTypes </span><span class="keyword">= 
<br>&nbsp; </span><span class="string">"/^\.(jpg|jpeg|gif|png|doc|docx|txt|rtf|pdf|xls|xlsx|
<br>&nbsp; &nbsp; &nbsp; &nbsp; ppt|pptx){1}$/i"</span><span class="keyword">;
<br></span><span class="default">$dir_base </span><span class="keyword">= </span><span class="string">"/your/file/location/"</span><span class="keyword">;
<br>
<br></span><span class="default">$isFile </span><span class="keyword">= </span><span class="default">is_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'Filedata'</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">]);
<br>if (</span><span class="default">$isFile</span><span class="keyword">)&nbsp; &nbsp; </span><span class="comment">//&nbsp; do we have a file?
<br>&nbsp;&nbsp; </span><span class="keyword">{</span><span class="comment">//&nbsp; sanatize file name
<br>&nbsp; &nbsp; //&nbsp; &nbsp;&nbsp; - remove extra spaces/convert to _, 
<br>&nbsp; &nbsp; //&nbsp; &nbsp;&nbsp; - remove non 0-9a-Z._- characters,
<br>&nbsp; &nbsp; //&nbsp; &nbsp;&nbsp; - remove leading/trailing spaces
<br>&nbsp; &nbsp; //&nbsp; check if under 5MB, 
<br>&nbsp; &nbsp; //&nbsp; check file extension for legal file types
<br>&nbsp; &nbsp; </span><span class="default">$safe_filename </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">"/\s+/"</span><span class="keyword">, </span><span class="string">"/[^-\.\w]+/"</span><span class="keyword">), 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">"_"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">), 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'Filedata'</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]));
<br>&nbsp; &nbsp; if (</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'Filedata'</span><span class="keyword">][</span><span class="string">'size'</span><span class="keyword">] &lt;= </span><span class="default">$MAXIMUM_FILESIZE </span><span class="keyword">&amp;&amp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$rEFileTypes</span><span class="keyword">, </span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$safe_filename</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">)))
<br>&nbsp; &nbsp; &nbsp; {</span><span class="default">$isMove </span><span class="keyword">= </span><span class="default">move_uploaded_file </span><span class="keyword">(
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'Filedata'</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">], 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dir_base</span><span class="keyword">.</span><span class="default">$safe_filename</span><span class="keyword">);}
<br>&nbsp; &nbsp; &nbsp; }
<br>&nbsp;&nbsp; } 
<br></span><span class="default">?&gt;
<br></span>
<br>I use $isFile and $isMove later in the code for error recording.
<br>
<br>Make sure your system has the appropriate file loading limits. This 
caused a lot of headeaches trying to figure out why some files loaded 
and some did not.&nbsp;&nbsp; In my case I have an .htaccess file in the
 root of the web site with:
<br>
<br>php_value post_max_size 16M
<br>php_value upload_max_filesize 6M
<br>
<br>You may also need to extend the execution time depending upon the amount of data being transferred.
<br>
<br>(sorry if spacing of code is a little off.&nbsp; it was hard to make the note editor like the code style.)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94597">  <div class="votes">
    <div id="Vu94597">
    <a href="http://php.net/manual/vote-note.php?id=94597&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd94597">
    <a href="http://php.net/manual/vote-note.php?id=94597&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V94597" title="42% like this...">
    -6
    </div>
  </div>
  <a href="#94597" class="name">
  <strong class="user"><em>gotrunko at hotmail dot com</em></strong></a><a class="genanchor" href="#94597"> ¶</a><div class="date" title="2009-11-13 04:50"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom94597" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
This function can upload many files whitout parameters in the declaration.<br>If one of them can not be uploaded, the function returns false and deletes all files that have been sent<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">uploadFiles</span><span class="keyword">() {<br>&nbsp; &nbsp; </span><span class="default">$num_args </span><span class="keyword">= </span><span class="default">func_num_args</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">$arg_list </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$valReturn </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$unlinkElement </span><span class="keyword">= array();<br>&nbsp; &nbsp; foreach(</span><span class="default">$arg_list </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) AND </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$value</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'error'</span><span class="keyword">] == </span><span class="default">0 </span><span class="keyword">AND isset(</span><span class="default">$value</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$value</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'size'</span><span class="keyword">] &gt; </span><span class="default">0 </span><span class="keyword">AND </span><span class="default">$value</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'size'</span><span class="keyword">] &lt; </span><span class="default">500000</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$typeAccepted </span><span class="keyword">= array(</span><span class="string">"image/jpeg"</span><span class="keyword">, </span><span class="string">"image/gif"</span><span class="keyword">, </span><span class="string">"image/png"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'type'</span><span class="keyword">],</span><span class="default">$typeAccepted</span><span class="keyword">)) {&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$destination </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset(</span><span class="default">$value</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$extension </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] , </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] , </span><span class="string">'.'</span><span class="keyword">) +</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$destination </span><span class="keyword">.= (</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="string">"-"</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">])).</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$extension</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$destination </span><span class="keyword">.= </span><span class="default">$value</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">],</span><span class="default">$destination</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$unlinkElement</span><span class="keyword">[] = </span><span class="default">$destination</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if(</span><span class="default">$i </span><span class="keyword">== </span><span class="default">$num_args</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$valReturn </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$unlinkElement </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$valReturn</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>To use this function you must specify an array with min two parameters like that. <br>NAME is an optional parameter !<br>uploadFiles(array("FILES","DESTINATION","NAME"));<br><br><span class="default">&lt;?php<br><br>$file_one </span><span class="keyword">= array(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'file_one'</span><span class="keyword">],</span><span class="default">$destination</span><span class="keyword">,</span><span class="default">$name_one</span><span class="keyword">);<br></span><span class="default">$file_two </span><span class="keyword">= array(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'file_two'</span><span class="keyword">],</span><span class="default">$destination</span><span class="keyword">); </span><span class="comment">//The name will be the same that $_FILES[]['name']<br><br></span><span class="keyword">if(</span><span class="default">uploadFiles</span><span class="keyword">(</span><span class="default">$file_one</span><span class="keyword">,</span><span class="default">$file_two</span><span class="keyword">)) {<br>&nbsp; &nbsp; echo </span><span class="string">"true"</span><span class="keyword">;<br>} else {<br>&nbsp; &nbsp; echo </span><span class="string">"false"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="55200">  <div class="votes">
    <div id="Vu55200">
    <a href="http://php.net/manual/vote-note.php?id=55200&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd55200">
    <a href="http://php.net/manual/vote-note.php?id=55200&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V55200" title="41% like this...">
    -2
    </div>
  </div>
  <a href="#55200" class="name">
  <strong class="user"><em>espiao at gmail dot com</em></strong></a><a class="genanchor" href="#55200"> ¶</a><div class="date" title="2005-07-27 07:25"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom55200" style="opacity: 0.65;">
<div class="phpcode"><code><span class="html">
/**<br> * This function moves the archives and directoryes of a directory of<br> * origin for a directory destination being able replace them or not.<br> **/<br><br>function mvdir($oldDir, $newDir, $replaceFiles = true) {<br><br>&nbsp; &nbsp; if ($oldDir == $newDir) {<br>&nbsp; &nbsp; &nbsp; &nbsp; trigger_error("Destination directory is equal of origin.");<br>&nbsp; &nbsp; &nbsp; &nbsp; return false;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; if (!($tmpDir = opendir($oldDir))) {<br>&nbsp; &nbsp; &nbsp; &nbsp; trigger_error("It was not possible to open origin directory.");<br>&nbsp; &nbsp; &nbsp; &nbsp; return false;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; if (!is_dir($newDir)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; trigger_error("It was not possible to open destination directory.");<br>&nbsp; &nbsp; &nbsp; &nbsp; return false;&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; while (($file = readdir($tmpDir)) !== false) {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if (($file != ".") &amp;&amp; ($file !== "..")) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $oldFileWithDir = $oldDir . $file;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $newFileWithDir = $newDir . $file;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (is_dir($oldFileWithDir)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @mkdir($newFileWithDir."/", 0777);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @mvdir($oldFileWithDir."/", $newFileWithDir."/", $replaceFiles);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @rmdir($oldFileWithDir);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (file_exists($newFileWithDir)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!$replaceFiles) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @unlink($oldFileWithDir);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @unlink($newFileWithDir);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @copy($oldFileWithDir, $newFileWithDir);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @chmod($newFileWithDir, 0777);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @unlink($oldFileWithDir);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return true;<br>&nbsp; &nbsp; <br>}<br><br>/**<br> * This is an example of move with replace files on destination folder if <br> * exists files with the same names on destionatio folder<br> **/<br>mvdir("/var/www/example/", "/var/www/other_folder/");<br><br>/**<br> * This is an example of move without replace files on destination<br> * folder if&nbsp; exists files with the same names on destionatio folder<br> **/<br>mvdir("/var/www/example/", "/var/www/other_folder/", false);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99456">  <div class="votes">
    <div id="Vu99456">
    <a href="http://php.net/manual/vote-note.php?id=99456&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd99456">
    <a href="http://php.net/manual/vote-note.php?id=99456&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V99456" title="40% like this...">
    -3
    </div>
  </div>
  <a href="#99456" class="name">
  <strong class="user"><em>Ray.Paseur sometimes uses Gmail</em></strong></a><a class="genanchor" href="#99456"> ¶</a><div class="date" title="2010-08-18 08:42"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom99456" style="opacity: 0.55;">
<div class="phpcode"><code><span class="html">
You can only move the uploaded file once.&nbsp; You can use copy() if you need the file in more than one place.<br><span class="default">&lt;?php </span><span class="comment">// RAY_temp_upload_example.php<br></span><span class="default">error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">);<br>echo </span><span class="string">"&lt;pre&gt;" </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br><br></span><span class="comment">// IF A FILE HAS BEEN UPLOADED<br></span><span class="keyword">if (!empty(</span><span class="default">$_FILES</span><span class="keyword">))<br>{<br>&nbsp; &nbsp; </span><span class="comment">// SHOW THE UPLOADED FILES<br>&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">// TRY TO MOVE THE FILE TWICE - SECOND MOVE RETURNS FALSE<br>&nbsp; &nbsp; </span><span class="keyword">if (!</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"userfile"</span><span class="keyword">][</span><span class="string">"tmp_name"</span><span class="keyword">], </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"userfile"</span><span class="keyword">][</span><span class="string">"name"</span><span class="keyword">])) echo </span><span class="string">"CANNOT MOVE </span><span class="keyword">{</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"userfile"</span><span class="keyword">][</span><span class="string">"name"</span><span class="keyword">]}</span><span class="string">" </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br>&nbsp; &nbsp; if (!</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"userfile"</span><span class="keyword">][</span><span class="string">"tmp_name"</span><span class="keyword">], </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"userfile"</span><span class="keyword">][</span><span class="string">"name"</span><span class="keyword">])) echo </span><span class="string">"CANNOT MOVE </span><span class="keyword">{</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"userfile"</span><span class="keyword">][</span><span class="string">"name"</span><span class="keyword">]}</span><span class="string">" </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">// SHOW THE UPLOADED FILES AFTER THE MOVE - NO VISIBLE CHANGE<br>&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">);<br>}<br><br></span><span class="comment">// END OF PHP, PUT UP THE HTML FORM TO GET THE FILE<br></span><span class="default">?&gt;<br></span>&lt;!-- The data encoding type, enctype, MUST be specified as below --&gt;<br>&lt;form enctype="multipart/form-data" method="POST"&gt;<br>&nbsp; &nbsp; &lt;!-- MAX_FILE_SIZE must precede the file input field --&gt;<br>&nbsp; &nbsp; &lt;input type="hidden" name="MAX_FILE_SIZE" value="300000" /&gt;<br>&nbsp; &nbsp; &lt;!-- Name of input element determines name in $_FILES array --&gt;<br>&nbsp; &nbsp; Send this file: &lt;input name="userfile" type="file" /&gt;<br>&nbsp; &nbsp; &lt;input type="submit" value="Send File" /&gt;<br>&lt;/form&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="40569">  <div class="votes">
    <div id="Vu40569">
    <a href="http://php.net/manual/vote-note.php?id=40569&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd40569">
    <a href="http://php.net/manual/vote-note.php?id=40569&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V40569" title="41% like this...">
    -4
    </div>
  </div>
  <a href="#40569" class="name">
  <strong class="user"><em>sauron at nospam on morannon dot org</em></strong></a><a class="genanchor" href="#40569"> ¶</a><div class="date" title="2004-03-08 05:20"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom40569" style="opacity: 0.45;">
<div class="phpcode"><code><span class="html">
An extension only does not really tell you what type of file it really 
is. I can easily rename a .jpg file to a .zip file and make the server 
think it is a ZIP file with webmaster kobrasrealm's code.<br><br>A 
better way is to use the Linux utility "file" to determine the file 
type. Although I'm aware that some users might use Windows on their 
webservers, I thought it's worth&nbsp; mentioning the utility here. 
Using the backtick operators and preg_matches on the output, you can 
easily determine the file type safely, and fix the extension when 
necessary.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85286">  <div class="votes">
    <div id="Vu85286">
    <a href="http://php.net/manual/vote-note.php?id=85286&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd85286">
    <a href="http://php.net/manual/vote-note.php?id=85286&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V85286" title="41% like this...">
    -7
    </div>
  </div>
  <a href="#85286" class="name">
  <strong class="user"><em>agan0052 at hotmail dot com</em></strong></a><a class="genanchor" href="#85286"> ¶</a><div class="date" title="2008-08-23 12:22"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom85286" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php <br><br></span><span class="keyword">if(isset(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'uploaded'</span><span class="keyword">])){<br></span><span class="default">$target </span><span class="keyword">= </span><span class="string">"galleries/"</span><span class="keyword">.</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'uploaded'</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]) ;<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">);<br><br>if(</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'uploaded'</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">],</span><span class="default">$target</span><span class="keyword">)) echo </span><span class="string">"OK!"</span><span class="keyword">;</span><span class="comment">//$chmod o+rw galleries<br><br></span><span class="keyword">}<br>else{<br> echo </span><span class="string">"&lt;form enctype='multipart/form-data' action='CodeTool.php' method='POST'&gt;"</span><span class="keyword">;<br> echo </span><span class="string">"File:&lt;input name='uploaded' type='file'/&gt;&lt;input type='submit' value='Upload'/&gt;"</span><span class="keyword">;<br> echo </span><span class="string">"&lt;/form&gt;"</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="116451">  <div class="votes">
    <div id="Vu116451">
    <a href="http://php.net/manual/vote-note.php?id=116451&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd116451">
    <a href="http://php.net/manual/vote-note.php?id=116451&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V116451" title="41% like this...">
    -12
    </div>
  </div>
  <a href="#116451" class="name">
  <strong class="user"><em>Tom</em></strong></a><a class="genanchor" href="#116451"> ¶</a><div class="date" title="2015-01-05 03:33"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom116451" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
Nowhere does it say how to get the error/warning message when this fails.<br><br>The only way I know of doing it is something like this:<br><br>&nbsp;&nbsp; if (move_uploaded_file($_FILES["file1"]["tmp_name"], $target_file)) {<br>&nbsp; &nbsp; &nbsp; echo "&lt;P&gt;FILE UPLOADED TO: $target_file&lt;/P&gt;";<br>&nbsp;&nbsp; } else {<br>&nbsp; &nbsp; &nbsp; echo "&lt;P&gt;MOVE UPLOADED FILE FAILED!&lt;/P&gt;";<br>&nbsp; &nbsp; &nbsp; print_r(error_get_last());<br>&nbsp;&nbsp; }</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85371">  <div class="votes">
    <div id="Vu85371">
    <a href="http://php.net/manual/vote-note.php?id=85371&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd85371">
    <a href="http://php.net/manual/vote-note.php?id=85371&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V85371" title="40% like this...">
    -3
    </div>
  </div>
  <a href="#85371" class="name">
  <strong class="user"><em>Mark Kazemier</em></strong></a><a class="genanchor" href="#85371"> ¶</a><div class="date" title="2008-08-27 09:36"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom85371" style="opacity: 0.55;">
<div class="phpcode"><code><span class="html">
I have the same problem as the person two comments below me. When I use 
the move_uploaded_file function the permissions for the file are set to 
0600. No matter what configurations you set.<br><br>I searched the 
internet and I found more people with the same problems, but no 
solutions. I set the umask of apache to 013 and still the files were set
 to 0600. <br><br>The copy function solves the problem. Another way to solve this problem is using the chmod function after uploading.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85149">  <div class="votes">
    <div id="Vu85149">
    <a href="http://php.net/manual/vote-note.php?id=85149&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd85149">
    <a href="http://php.net/manual/vote-note.php?id=85149&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V85149" title="40% like this...">
    -5
    </div>
  </div>
  <a href="#85149" class="name">
  <strong class="user"><em>Florian S. in H. an der E. [.de]</em></strong></a><a class="genanchor" href="#85149"> ¶</a><div class="date" title="2008-08-17 02:02"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom85149" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
move_uploaded_file (on my setup) always makes files 0600 ("rw- --- ---")
 and owned by the user running the webserver (owner AND group).<br>Even though the directory has a sticky bit set to the group permissions!<br>I couldn't find any settings to change this via php.ini or even using "umask()".<br><br>I
 want my regular user on the server to be able to "tar cjf" the 
directory .. which would fail on files totally owned by the 
webserver-process-user;<br>the "copy(from, to)" function obeys the sticky-bit though!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103190">  <div class="votes">
    <div id="Vu103190">
    <a href="http://php.net/manual/vote-note.php?id=103190&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd103190">
    <a href="http://php.net/manual/vote-note.php?id=103190&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V103190" title="39% like this...">
    -5
    </div>
  </div>
  <a href="#103190" class="name">
  <strong class="user"><em>wilcobeekhuizen at gmail dot com</em></strong></a><a class="genanchor" href="#103190"> ¶</a><div class="date" title="2011-03-30 12:55"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom103190" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
When uploading a file with a very long filename, for example 255 
characters, move_uploaded_file fails. The longest file I've succesfully 
uploaded has a 247 character filename. So, although you can create a 250
 character filename locally the server may not be able to move it.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94141">  <div class="votes">
    <div id="Vu94141">
    <a href="http://php.net/manual/vote-note.php?id=94141&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd94141">
    <a href="http://php.net/manual/vote-note.php?id=94141&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V94141" title="38% like this...">
    -3
    </div>
  </div>
  <a href="#94141" class="name">
  <strong class="user"><em>chatchaw at tot dot co dot th</em></strong></a><a class="genanchor" href="#94141"> ¶</a><div class="date" title="2009-10-19 12:03"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom94141" style="opacity: 0.55;">
<div class="phpcode"><code><span class="html">
When you use move_uploaded_file function to upload a file with 
utf-8&nbsp; filename to linux system, you probably check your result by 
browsing to see the file in the target directory so please make sure 
that your terminal emulator or your samba configuration is set the 
character encoding to utf-8 otherwise&nbsp; your file will be shown as 
?????? (unreadable character).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74067">  <div class="votes">
    <div id="Vu74067">
    <a href="http://php.net/manual/vote-note.php?id=74067&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd74067">
    <a href="http://php.net/manual/vote-note.php?id=74067&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V74067" title="38% like this...">
    -3
    </div>
  </div>
  <a href="#74067" class="name">
  <strong class="user"><em>guy at neonxero dot net</em></strong></a><a class="genanchor" href="#74067"> ¶</a><div class="date" title="2007-03-22 07:47"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom74067" style="opacity: 0.55;">
<div class="phpcode"><code><span class="html">
I could be wrong, but I usualy use <br><br>$uploadext = strtolower(strrchr($imagename,"."));<br><br>to find the file extension when uploading, as opposed to explode().</span>
</code></div>
  </div>
 </div>
  <div class="note" id="64799">  <div class="votes">
    <div id="Vu64799">
    <a href="http://php.net/manual/vote-note.php?id=64799&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd64799">
    <a href="http://php.net/manual/vote-note.php?id=64799&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V64799" title="38% like this...">
    -3
    </div>
  </div>
  <a href="#64799" class="name">
  <strong class="user"><em>sergeygrinev at mail dot ru</em></strong></a><a class="genanchor" href="#64799"> ¶</a><div class="date" title="2006-04-20 02:04"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom64799" style="opacity: 0.55;">
<div class="phpcode"><code><span class="html">
small typo:<br><br>$fulldest = $dest.$newfilename;<br><br>show be<br><br>$fulldest = $dest.$filename;<br><br>or you would have infinite loop.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77661">  <div class="votes">
    <div id="Vu77661">
    <a href="http://php.net/manual/vote-note.php?id=77661&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd77661">
    <a href="http://php.net/manual/vote-note.php?id=77661&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V77661" title="40% like this...">
    -11
    </div>
  </div>
  <a href="#77661" class="name">
  <strong class="user"><em>iim dot vxk at gmail dot com</em></strong></a><a class="genanchor" href="#77661"> ¶</a><div class="date" title="2007-09-07 02:38"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom77661" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
when you get this 2 Warnings - paths are a real sample - ::<br><br>-<br>move_uploaded_file(/uploads/images/sample.png)
 [function.move-uploaded-file]: failed to open stream: No such file or 
directory in /scripts/php/system/upload-file.php on line X<br>-<br><br>and<br><br>-<br>move_uploaded_file()
 [function.move-uploaded-file]: Unable to move '/tmp/somefilename' to 
'/uploads/images/sample.png' in /scripts/php/system/upload-file.php on 
line X<br>-<br><br>probably the path '/uploads/images/sample.png' is 
incomplete, in my case the complet path is 
"/home/x-user/public_html/uploads/images/sample.png"<br><br>you can use getcwd() to know the current working directory.<br><br>:)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75451">  <div class="votes">
    <div id="Vu75451">
    <a href="http://php.net/manual/vote-note.php?id=75451&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd75451">
    <a href="http://php.net/manual/vote-note.php?id=75451&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V75451" title="37% like this...">
    -2
    </div>
  </div>
  <a href="#75451" class="name">
  <strong class="user"><em>masahigo at gmail dot com</em></strong></a><a class="genanchor" href="#75451"> ¶</a><div class="date" title="2007-05-30 08:49"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom75451" style="opacity: 0.65;">
<div class="phpcode"><code><span class="html">
I found a great resource concerning uploads with PHP:<br><br><a href="http://www.radinks.com/upload/config.php" rel="nofollow" target="_blank">http://www.radinks.com/upload/config.php</a><br><br>They explain and tell how to optimize PHP installation to handle large file uploads. Helped me a lot!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50055">  <div class="votes">
    <div id="Vu50055">
    <a href="http://php.net/manual/vote-note.php?id=50055&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd50055">
    <a href="http://php.net/manual/vote-note.php?id=50055&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V50055" title="36% like this...">
    -3
    </div>
  </div>
  <a href="#50055" class="name">
  <strong class="user"><em>Michel S</em></strong></a><a class="genanchor" href="#50055"> ¶</a><div class="date" title="2005-02-16 09:41"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom50055" style="opacity: 0.55;">
<div class="phpcode"><code><span class="html">
I once had a problem with this function. File was uploaded correctly, 
but I still had to chmod the file afterwards. It could not be used 
otherwise.<br><br>Michel S</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61968">  <div class="votes">
    <div id="Vu61968">
    <a href="http://php.net/manual/vote-note.php?id=61968&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd61968">
    <a href="http://php.net/manual/vote-note.php?id=61968&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V61968" title="33% like this...">
    -3
    </div>
  </div>
  <a href="#61968" class="name">
  <strong class="user"><em>j dot m dot thomas at NOSPAM dot blueyonder dot co dot uk</em></strong></a><a class="genanchor" href="#61968"> ¶</a><div class="date" title="2006-02-16 12:26"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom61968" style="opacity: 0.55;">
<div class="phpcode"><code><span class="html">
To retrieve the file extension, and various other information about the path, it is easiest to use the pathinfo function.<br><br><span class="default">&lt;?php<br>$path_parts </span><span class="keyword">= </span><span class="default">pathinfo</span><span class="keyword">(</span><span class="string">'/www/htdocs/index.html'</span><span class="keyword">);<br><br>echo </span><span class="default">$path_parts</span><span class="keyword">[</span><span class="string">'dirname'</span><span class="keyword">], </span><span class="string">"\n"</span><span class="keyword">;<br>echo </span><span class="default">$path_parts</span><span class="keyword">[</span><span class="string">'basename'</span><span class="keyword">], </span><span class="string">"\n"</span><span class="keyword">;<br>echo </span><span class="default">$path_parts</span><span class="keyword">[</span><span class="string">'extension'</span><span class="keyword">], </span><span class="string">"\n"</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>Would produce:<br><br>/www/htdocs<br>index.html<br>html<br><br><a href="http://uk.php.net/manual/en/function.pathinfo.php" rel="nofollow" target="_blank">http://uk.php.net/manual/en/function.pathinfo.php</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="74933">  <div class="votes">
    <div id="Vu74933">
    <a href="http://php.net/manual/vote-note.php?id=74933&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd74933">
    <a href="http://php.net/manual/vote-note.php?id=74933&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V74933" title="33% like this...">
    -5
    </div>
  </div>
  <a href="#74933" class="name">
  <strong class="user"><em>info at arpadh dot hu</em></strong></a><a class="genanchor" href="#74933"> ¶</a><div class="date" title="2007-05-04 11:02"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom74933" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
Values upload_max_filesize and post_max_size (ie. php.ini values) cannot be modified in runtime with ini_set() function.<br>If
 you are using Apache web server, use .htaccess files with an IfModule 
replacing values corresponding to your file size and PHP version:<br><br>&lt;IfModule mod_php4.c&gt;<br>php_value upload_max_filesize 50M<br>php_value post_max_size 50M<br>&lt;/IfModule&gt;<br><br>- means 50MB upload limit.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="73698">  <div class="votes">
    <div id="Vu73698">
    <a href="http://php.net/manual/vote-note.php?id=73698&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd73698">
    <a href="http://php.net/manual/vote-note.php?id=73698&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V73698" title="33% like this...">
    -5
    </div>
  </div>
  <a href="#73698" class="name">
  <strong class="user"><em>Harmor</em></strong></a><a class="genanchor" href="#73698"> ¶</a><div class="date" title="2007-03-06 09:38"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom73698" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
the dot only dot storm at gmail dot com wrote:<br>&gt;<br>&gt; In addition to the file extension checking. A simply way<br>&gt; of getting the extension (regardless of size):<br>&gt; <br>&gt; $efilename = explode('.', $filename);<br>&gt; $ext = $efilename[count($efilename) - 1];<br>&gt;<br><br>How about:<br><br>$ext = end(explode('.',$filename));</span>
</code></div>
  </div>
 </div>
  <div class="note" id="37285">  <div class="votes">
    <div id="Vu37285">
    <a href="http://php.net/manual/vote-note.php?id=37285&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd37285">
    <a href="http://php.net/manual/vote-note.php?id=37285&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V37285" title="33% like this...">
    -3
    </div>
  </div>
  <a href="#37285" class="name"><strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="#37285"> ¶</a><div class="date" title="2003-11-08 07:54"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom37285" style="opacity: 0.55;">
<div class="phpcode"><code><span class="html">
The example to find file extension bellow is quite confusing and its 
using to much code for a much simpler solution. Which is in example:<br><br>$file_parts = pathinfo('dir/' . $_FILES['file']['name']);<br>$file_extension = strtolower($file_parts['extension']);<br><br>The 'dir/' part is only to get a valid path.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114982">  <div class="votes">
    <div id="Vu114982">
    <a href="http://php.net/manual/vote-note.php?id=114982&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd114982">
    <a href="http://php.net/manual/vote-note.php?id=114982&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V114982" title="30% like this...">
    -4
    </div>
  </div>
  <a href="#114982" class="name">
  <strong class="user"><em>Chris Hecker</em></strong></a><a class="genanchor" href="#114982"> ¶</a><div class="date" title="2014-05-09 06:26"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom114982" style="opacity: 0.45;">
<div class="phpcode"><code><span class="html">
Re: Florian S. in H. an der E. [.de]'s point about directory stick bits,
 I got hit by this a bunch since I use groups and dir sticky bits to 
secure my site, so I wrote this replacement, which others might find 
useful:<br><br>/**<br> * obey sticky bit with move_uploaded_file<br> *<br> */<br>function wp_move_uploaded_file( $filename, $destination ) {<br>&nbsp; define("STICKYGRPDIR",042010);<br>&nbsp; $stat = stat(dirname($destination));<br>&nbsp; if(move_uploaded_file($filename,$destination)) {<br>&nbsp; &nbsp; if($stat['mode'] &amp; STICKYGRPDIR) {<br>&nbsp; &nbsp; &nbsp; return chgrp($destination,$stat['gid']);<br>&nbsp; &nbsp; }<br>&nbsp; } else {<br>&nbsp; &nbsp; return false;<br>&nbsp; }<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="73677">  <div class="votes">
    <div id="Vu73677">
    <a href="http://php.net/manual/vote-note.php?id=73677&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd73677">
    <a href="http://php.net/manual/vote-note.php?id=73677&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V73677" title="30% like this...">
    -4
    </div>
  </div>
  <a href="#73677" class="name">
  <strong class="user"><em>dev at rising9 dot com</em></strong></a><a class="genanchor" href="#73677"> ¶</a><div class="date" title="2007-03-06 05:07"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom73677" style="opacity: 0.45;">
<div class="phpcode"><code><span class="html">
Can you explain more, how i can change the max memory size varible for the large file can work with move_uploaded_file()?<br>Thanks a lot!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61427">  <div class="votes">
    <div id="Vu61427">
    <a href="http://php.net/manual/vote-note.php?id=61427&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd61427">
    <a href="http://php.net/manual/vote-note.php?id=61427&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V61427" title="30% like this...">
    -4
    </div>
  </div>
  <a href="#61427" class="name">
  <strong class="user"><em>adam at darkhousemedia dot com</em></strong></a><a class="genanchor" href="#61427"> ¶</a><div class="date" title="2006-02-02 10:35"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom61427" style="opacity: 0.45;">
<div class="phpcode"><code><span class="html">
To retrieve the file extension, I think this example makes more sense than the one below.&nbsp; <br><br>$ext = explode(".", $file);<br>$ext = array_pop($ext);<br><br>It
 doesn't have to count() the array and then subtract 1 to point to the 
proper array element, it simply isolates the last element of the array, 
and discards everything else.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61333">  <div class="votes">
    <div id="Vu61333">
    <a href="http://php.net/manual/vote-note.php?id=61333&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd61333">
    <a href="http://php.net/manual/vote-note.php?id=61333&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V61333" title="30% like this...">
    -4
    </div>
  </div>
  <a href="#61333" class="name">
  <strong class="user"><em>calamitoso at gmail dot com</em></strong></a><a class="genanchor" href="#61333"> ¶</a><div class="date" title="2006-01-31 11:10"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom61333" style="opacity: 0.45;">
<div class="phpcode"><code><span class="html">
to separate (for example) images from other file types among the 
uploaded files you can check the MIME type also (thus making the file 
extension check unnecessary)<br><br>$temp = strpos($_FILES["pic"]["type"], "image");<br>if ($rep===FALSE){<br>&nbsp;&nbsp; //the strpos function will return a boolean "false" ONLY if the needle string is not found within the haystack<br>&nbsp;&nbsp; echo "is not an image";<br>}else{<br>&nbsp;&nbsp; echo "is an image";<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="48264">  <div class="votes">
    <div id="Vu48264">
    <a href="http://php.net/manual/vote-note.php?id=48264&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd48264">
    <a href="http://php.net/manual/vote-note.php?id=48264&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V48264" title="29% like this...">
    -11
    </div>
  </div>
  <a href="#48264" class="name">
  <strong class="user"><em>allan666 at NOSPAM dot gmail dot com</em></strong></a><a class="genanchor" href="#48264"> ¶</a><div class="date" title="2004-12-16 10:35"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom48264" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
On the Fedora Core 3 Linux distribution, you may get a "failed to open 
stream: Permission denied in ..." message. I fact changing the 
permission of the directory will not work (even if you set to 0777). It 
is because of the new SELinux kernel that allow apache user to write 
only in /tmp dir (I think). In order to solve the problem you must to 
disable the SELinux (at least for apache service) to allow the server to
 write in other directories. To do that, run the 
system-config-securitylevel app and disable the SE to apache service. 
Reboot your system and continue your work. Hope it helps!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87208">  <div class="votes">
    <div id="Vu87208">
    <a href="http://php.net/manual/vote-note.php?id=87208&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd87208">
    <a href="http://php.net/manual/vote-note.php?id=87208&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V87208" title="25% like this...">
    -6
    </div>
  </div>
  <a href="#87208" class="name">
  <strong class="user"><em>Antoine</em></strong></a><a class="genanchor" href="#87208"> ¶</a><div class="date" title="2008-11-24 12:44"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom87208" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
I had exactly than" tnp at shaman dot co dot uk" : move_uploaded_file() 
is either asynchronous or uses some kind of virtual filesystem. But you 
may encounter big problems when trying to access a file just uploaded, 
especially is you tried to change the name.<br>If you have problems where the uploaded file seems unaccessible, try to use copy() instead.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50464">  <div class="votes">
    <div id="Vu50464">
    <a href="http://php.net/manual/vote-note.php?id=50464&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd50464">
    <a href="http://php.net/manual/vote-note.php?id=50464&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V50464" title="25% like this...">
    -4
    </div>
  </div>
  <a href="#50464" class="name">
  <strong class="user"><em>user at php dot net</em></strong></a><a class="genanchor" href="#50464"> ¶</a><div class="date" title="2005-03-01 02:54"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom50464" style="opacity: 0.45;">
<div class="phpcode"><code><span class="html">
Giving the directory 777 permission is not a good idea for security 
reasons, it would be better to create the directory using "mkdir()".<br><br>That will make php user (usually "nobody") the owner of the directory, and permissions will not be a problem.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="42949">  <div class="votes">
    <div id="Vu42949">
    <a href="http://php.net/manual/vote-note.php?id=42949&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd42949">
    <a href="http://php.net/manual/vote-note.php?id=42949&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V42949" title="25% like this...">
    -4
    </div>
  </div>
  <a href="#42949" class="name">
  <strong class="user"><em>froid_nordik at sympatico dot ca</em></strong></a><a class="genanchor" href="#42949"> ¶</a><div class="date" title="2004-06-04 09:26"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom42949" style="opacity: 0.45;">
<div class="phpcode"><code><span class="html">
Make sure the directory you are moving the file to exists before using this command.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="64018">  <div class="votes">
    <div id="Vu64018">
    <a href="http://php.net/manual/vote-note.php?id=64018&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd64018">
    <a href="http://php.net/manual/vote-note.php?id=64018&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V64018" title="25% like this...">
    -10
    </div>
  </div>
  <a href="#64018" class="name">
  <strong class="user"><em>jessy dot diamondman at gmail dot com</em></strong></a><a class="genanchor" href="#64018"> ¶</a><div class="date" title="2006-04-05 09:29"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom64018" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
I am pretty new, and am having upload problems myself, but I think I can
 help out ffproberen2 at dodgeit dot com with his premission denied 
errors. I had these two, and I had to change the upload directory, not 
the tmp_upload_dir or what ever it is called. The move_uploaded_file 
meathod takes an upload location as the last parameter. I am running a 
bundled package of Apache, Php, mySQL and so on, and on mine, specifing a
 directory of '' will upload it into C:\Program Files\xampp\apache (my 
PC is my experimental server, I will get linux, but got to obtain it and
 internet cuts off after 196mb so can't download it) even though php 
file is in C:\Program 
Files\xampp\htdocs\xampp\jessyexum\upload_client.php. <br><br>This is a code that I found and then modified, hope it can help. It dosn't always upload every file type giving me an error #2.<br><br><span class="default">&lt;?php<br>$uploaddir </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br></span><span class="default">$uploadfile </span><span class="keyword">= </span><span class="default">$uploaddir </span><span class="keyword">. </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'upfile'</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]);<br>echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br>if (</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'upfile'</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">], </span><span class="default">$uploadfile</span><span class="keyword">)) {<br>&nbsp;&nbsp; echo </span><span class="string">"File is valid, and was successfully uploaded.\n"</span><span class="keyword">;<br>} else {<br>&nbsp;&nbsp; echo </span><span class="string">"Possible file upload attack!\n"</span><span class="keyword">;<br>}<br>echo </span><span class="string">'Here is some more debugging info:'</span><span class="keyword">;<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">);<br>print </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="122022">  <div class="votes">
    <div id="Vu122022">
    <a href="http://php.net/manual/vote-note.php?id=122022&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd122022">
    <a href="http://php.net/manual/vote-note.php?id=122022&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V122022" title="20% like this...">
    -3
    </div>
  </div>
  <a href="#122022" class="name">
  <strong class="user"><em>waitshark at gmail dot com</em></strong></a><a class="genanchor" href="#122022"> ¶</a><div class="date" title="2017-12-15 07:26"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom122022" style="opacity: 0.55;">
<div class="phpcode"><code><span class="html">
this is what i use to colect data for multiple uploads<br>$form_field - html form field name<br>function upl_img_data_multy($form_field){<br><br>&nbsp;&nbsp; $files_data = array();<br>&nbsp;&nbsp; $submited_files = $_FILES[$form_field];<br>&nbsp;&nbsp; $submited_files_tmp_name = $submited_files["tmp_name"];<br><br>&nbsp; &nbsp; foreach($submited_files_tmp_name as $key =&gt; $tmp_name){<br>&nbsp; &nbsp; &nbsp; &nbsp; $files_data[$key] = array();<br>&nbsp; &nbsp; &nbsp; &nbsp; $size_data =&nbsp; getimagesize($tmp_name);<br>&nbsp; &nbsp; &nbsp; &nbsp; $files_data[$key]["name"] = basename($submited_files["name"][$key]);<br>&nbsp; &nbsp; &nbsp; &nbsp; $files_data[$key]["tmp_name"] = $_FILES[$form_field]["tmp_name"][$key];<br>&nbsp; &nbsp; &nbsp; &nbsp; $files_data[$key]["type"] = $_FILES[$form_field]["type"][$key];&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; $files_data[$key]["size-w"] = $size_data[0];<br>&nbsp; &nbsp; &nbsp; &nbsp; $files_data[$key]["size-h"] = $size_data[1];<br>&nbsp; &nbsp; &nbsp; &nbsp; $files_data[$key]["size"] = $_FILES[$form_field]["size"][$key];<br>&nbsp; &nbsp; &nbsp; &nbsp; $files_data[$key]["error"] = $_FILES[$form_field]["error"][$key];&nbsp;&nbsp; <br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp;&nbsp; return $files_data;<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="121215">  <div class="votes">
    <div id="Vu121215">
    <a href="http://php.net/manual/vote-note.php?id=121215&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd121215">
    <a href="http://php.net/manual/vote-note.php?id=121215&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V121215" title="20% like this...">
    -3
    </div>
  </div>
  <a href="#121215" class="name">
  <strong class="user"><em>Ian Macdonald</em></strong></a><a class="genanchor" href="#121215"> ¶</a><div class="date" title="2017-06-12 09:39"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom121215" style="opacity: 0.55;">
<div class="phpcode"><code><span class="html">
Also be aware that ini_get('post_max_size') doesn't return a numeric value; it literally returns the string '16M' or similar.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59808">  <div class="votes">
    <div id="Vu59808">
    <a href="http://php.net/manual/vote-note.php?id=59808&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd59808">
    <a href="http://php.net/manual/vote-note.php?id=59808&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V59808" title="22% like this...">
    -5
    </div>
  </div>
  <a href="#59808" class="name">
  <strong class="user"><em>AT-HE (at_he AT hotm4il DOT com)</em></strong></a><a class="genanchor" href="#59808"> ¶</a><div class="date" title="2005-12-15 10:28"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom59808" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
---------<br>Note that post_max_size also needs to be considered, by 
default it is 8M. I raised my upload_max_filesize to 20M and was 
wondering why 10M uploads weren't working...<br><br>r: It could be because of your max execution time.<br>----------<br><br>try changing the value of both post_max_size and upload_max_filesize</span>
</code></div>
  </div>
 </div>
  <div class="note" id="58464">  <div class="votes">
    <div id="Vu58464">
    <a href="http://php.net/manual/vote-note.php?id=58464&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd58464">
    <a href="http://php.net/manual/vote-note.php?id=58464&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V58464" title="22% like this...">
    -5
    </div>
  </div>
  <a href="#58464" class="name"><strong class="user"><em>Anonymous</em></strong></a><a class="genanchor" href="#58464"> ¶</a><div class="date" title="2005-11-04 03:56"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom58464" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
[quote]<br>Note that post_max_size also needs to be considered, by 
default it is 8M. I raised my upload_max_filesize to 20M and was 
wondering why 10M uploads weren't working... <br>[/quote]<br><br>It could be because of your max execution time.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="40320">  <div class="votes">
    <div id="Vu40320">
    <a href="http://php.net/manual/vote-note.php?id=40320&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd40320">
    <a href="http://php.net/manual/vote-note.php?id=40320&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V40320" title="23% like this...">
    -7
    </div>
  </div>
  <a href="#40320" class="name">
  <strong class="user"><em>mail at johan dot it</em></strong></a><a class="genanchor" href="#40320"> ¶</a><div class="date" title="2004-02-28 02:14"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom40320" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
Warning: If you save a md5_file hash in a database to keep record of 
uploaded files, which is usefull to prevent users from uploading the 
same file twice, be aware that after using move_uploaded_file the 
md5_file hash changes! And you are unable to find the corresponding hash
 and delete it in the database, when a file is deleted.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59730">  <div class="votes">
    <div id="Vu59730">
    <a href="http://php.net/manual/vote-note.php?id=59730&amp;page=function.move-uploaded-file&amp;vote=up" title="Vote up!" class="usernotes-voteu">up</a>
    </div>
    <div id="Vd59730">
    <a href="http://php.net/manual/vote-note.php?id=59730&amp;page=function.move-uploaded-file&amp;vote=down" title="Vote down!" class="usernotes-voted">down</a>
    </div>
    <div class="tally" id="V59730" title="16% like this...">
    -8
    </div>
  </div>
  <a href="#59730" class="name">
  <strong class="user"><em>nouncad at mayetlite dot com</em></strong></a><a class="genanchor" href="#59730"> ¶</a><div class="date" title="2005-12-14 05:30"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom59730" style="opacity: 0.35;">
<div class="phpcode"><code><span class="html">
Great!! my first note here...<br><br>This function upload a file.<br>If file exist, create a copy as "filename[n].ext"<br><br><span class="default">&lt;?php <br></span><span class="keyword">function </span><span class="default">subirFichero</span><span class="keyword">(</span><span class="default">$origen</span><span class="keyword">, </span><span class="default">$destinoDir</span><span class="keyword">, </span><span class="default">$ftemporal</span><span class="keyword">) {&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$origen </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$origen</span><span class="keyword">));<br><br>&nbsp; &nbsp; </span><span class="default">$destinoFull </span><span class="keyword">= </span><span class="default">$destinoDir</span><span class="keyword">.</span><span class="default">$origen</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$frand </span><span class="keyword">= </span><span class="default">$origen</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; while (</span><span class="default">file_exists</span><span class="keyword">( </span><span class="default">$destinoFull </span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$file_name&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$origen</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$origen</span><span class="keyword">)-</span><span class="default">4</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$file_extension&nbsp; </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$origen</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$origen</span><span class="keyword">)-</span><span class="default">4</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$origen</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$frand </span><span class="keyword">= </span><span class="default">$file_name</span><span class="keyword">.</span><span class="string">"[</span><span class="default">$i</span><span class="string">]"</span><span class="keyword">.</span><span class="default">$file_extension</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$destinoFull </span><span class="keyword">= </span><span class="default">$destinoDir</span><span class="keyword">.</span><span class="default">$frand</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; if (</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$ftemporal</span><span class="keyword">, </span><span class="default">$destinoFull</span><span class="keyword">))&nbsp; &nbsp; return </span><span class="default">$frand</span><span class="keyword">;<br>&nbsp;
 &nbsp; else&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">"0"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 <div class="foot"><a href="http://php.net/manual/add-note.php?sect=function.move-uploaded-file&amp;redirect=http://php.net/manual/fr/function.move-uploaded-file.php"><img src="PHPManual_move_uploaded_file_fichiers/notes-add2x.png" alt="add a note" width="12" height="12"> <small>add a note</small></a></div>
</section>    </section><!-- layout-content -->
        <aside class="layout-menu">

        <ul class="parent-menu-list">
                                    <li>
                <a href="http://php.net/manual/fr/ref.filesystem.php">Fonctions sur les systèmes de fichiers</a>

                                    <ul class="child-menu-list">

                                                <li class="">
                            <a href="http://php.net/manual/fr/function.basename.php" title="basename">basename</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.chgrp.php" title="chgrp">chgrp</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.chmod.php" title="chmod">chmod</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.chown.php" title="chown">chown</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.clearstatcache.php" title="clearstatcache">clearstatcache</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.copy.php" title="copy">copy</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.delete.php" title="delete">delete</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.dirname.php" title="dirname">dirname</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.disk-free-space.php" title="disk_​free_​space">disk_​free_​space</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.disk-total-space.php" title="disk_​total_​space">disk_​total_​space</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.diskfreespace.php" title="diskfreespace">diskfreespace</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fclose.php" title="fclose">fclose</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.feof.php" title="feof">feof</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fflush.php" title="fflush">fflush</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fgetc.php" title="fgetc">fgetc</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fgetcsv.php" title="fgetcsv">fgetcsv</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fgets.php" title="fgets">fgets</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fgetss.php" title="fgetss">fgetss</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.file-exists.php" title="file_​exists">file_​exists</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.file-get-contents.php" title="file_​get_​contents">file_​get_​contents</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.file-put-contents.php" title="file_​put_​contents">file_​put_​contents</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.file.php" title="file">file</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fileatime.php" title="fileatime">fileatime</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.filectime.php" title="filectime">filectime</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.filegroup.php" title="filegroup">filegroup</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fileinode.php" title="fileinode">fileinode</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.filemtime.php" title="filemtime">filemtime</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fileowner.php" title="fileowner">fileowner</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fileperms.php" title="fileperms">fileperms</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.filesize.php" title="filesize">filesize</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.filetype.php" title="filetype">filetype</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.flock.php" title="flock">flock</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fnmatch.php" title="fnmatch">fnmatch</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fopen.php" title="fopen">fopen</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fpassthru.php" title="fpassthru">fpassthru</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fputcsv.php" title="fputcsv">fputcsv</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fputs.php" title="fputs">fputs</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fread.php" title="fread">fread</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fscanf.php" title="fscanf">fscanf</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fseek.php" title="fseek">fseek</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fstat.php" title="fstat">fstat</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.ftell.php" title="ftell">ftell</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.ftruncate.php" title="ftruncate">ftruncate</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.fwrite.php" title="fwrite">fwrite</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.glob.php" title="glob">glob</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.is-dir.php" title="is_​dir">is_​dir</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.is-executable.php" title="is_​executable">is_​executable</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.is-file.php" title="is_​file">is_​file</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.is-link.php" title="is_​link">is_​link</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.is-readable.php" title="is_​readable">is_​readable</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.is-uploaded-file.php" title="is_​uploaded_​file">is_​uploaded_​file</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.is-writable.php" title="is_​writable">is_​writable</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.is-writeable.php" title="is_​writeable">is_​writeable</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.lchgrp.php" title="lchgrp">lchgrp</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.lchown.php" title="lchown">lchown</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.link.php" title="link">link</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.linkinfo.php" title="linkinfo">linkinfo</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.lstat.php" title="lstat">lstat</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.mkdir.php" title="mkdir">mkdir</a>
                        </li>
                                                <li class="current">
                            <a href="http://php.net/manual/fr/function.move-uploaded-file.php" title="move_​uploaded_​file">move_​uploaded_​file</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.parse-ini-file.php" title="parse_​ini_​file">parse_​ini_​file</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.parse-ini-string.php" title="parse_​ini_​string">parse_​ini_​string</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.pathinfo.php" title="pathinfo">pathinfo</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.pclose.php" title="pclose">pclose</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.popen.php" title="popen">popen</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.readfile.php" title="readfile">readfile</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.readlink.php" title="readlink">readlink</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.realpath-cache-get.php" title="realpath_​cache_​get">realpath_​cache_​get</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.realpath-cache-size.php" title="realpath_​cache_​size">realpath_​cache_​size</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.realpath.php" title="realpath">realpath</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.rename.php" title="rename">rename</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.rewind.php" title="rewind">rewind</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.rmdir.php" title="rmdir">rmdir</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.set-file-buffer.php" title="set_​file_​buffer">set_​file_​buffer</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.stat.php" title="stat">stat</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.symlink.php" title="symlink">symlink</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.tempnam.php" title="tempnam">tempnam</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.tmpfile.php" title="tmpfile">tmpfile</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.touch.php" title="touch">touch</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.umask.php" title="umask">umask</a>
                        </li>
                                                <li class="">
                            <a href="http://php.net/manual/fr/function.unlink.php" title="unlink">unlink</a>
                        </li>
                        
                    </ul>
                
            </li>
                        
                    </ul>
    </aside>


  </div><!-- layout -->

  <footer>
    <div class="container footer-content">
      <div class="row-fluid">
      <ul class="footmenu">
        <li><a href="http://php.net/copyright.php">Copyright © 2001-2019 The PHP Group</a></li>
        <li><a href="http://php.net/my.php">My PHP.net</a></li>
        <li><a href="http://php.net/contact.php">Contact</a></li>
        <li><a href="http://php.net/sites.php">Other PHP.net sites</a></li>
        <li><a href="http://php.net/mirrors.php">Mirror sites</a></li>
        <li><a href="http://php.net/privacy.php">Privacy policy</a></li>
      </ul>
      </div>
    </div>
  </footer>

    
 <!-- External and third party libraries. -->
 <script src="PHPManual_move_uploaded_file_fichiers/jquery.js"></script>
<script src="PHPManual_move_uploaded_file_fichiers/cached_004.php"></script>
<script src="PHPManual_move_uploaded_file_fichiers/cached_005.php"></script>
<script src="PHPManual_move_uploaded_file_fichiers/cached.php"></script>
<script src="PHPManual_move_uploaded_file_fichiers/cached_006.php"></script>
<script src="PHPManual_move_uploaded_file_fichiers/cached_002.php"></script>
<script src="PHPManual_move_uploaded_file_fichiers/cached_003.php"></script>

<a id="toTop" href="javascript:;" style="display: none;"><span id="toTopHover"></span><img alt="To Top" src="PHPManual_move_uploaded_file_fichiers/to-top2x.png" width="40" height="40"></a>



</body></html>